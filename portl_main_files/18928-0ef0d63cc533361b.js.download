try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="733805b7-0065-4f99-96fb-2caef8e36236",e._sentryDebugIdIdentifier="sentry-dbid-733805b7-0065-4f99-96fb-2caef8e36236")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18928],{0x1db5af03:(e,t,o)=>{o.d(t,{O:()=>a});let a=(0,o(0x394ef833).v)(e=>({serversNeedingWebsocketRetry:[],addServerNeedingWebsocketRetry:t=>e(e=>({serversNeedingWebsocketRetry:[...e.serversNeedingWebsocketRetry,t]})),clearServersNeedingWebsocketRetry:()=>e({serversNeedingWebsocketRetry:[]})}))},0x3797c34f:(e,t,o)=>{o.d(t,{CG:()=>n});var a=o(0x11e50e4d6);o(0x10e01d04d),o(0xc975f685),o(0x1c9d93a5f);let n="ui/resourceUri";a.Zs},0xc975f685:(e,t,o)=>{o.d(t,{$i:()=>Y,A_:()=>b,DF:()=>C,FF:()=>j,Je:()=>S,Ji:()=>p,Jj:()=>E,O$:()=>v,UK:()=>h,Y2:()=>y,Z1:()=>m,aE:()=>r,e:()=>f,ne:()=>z,pG:()=>_,u$:()=>g,w_:()=>k});var a=o(0x10e01d04d),n=o(0x156c4e43b);let r="2025-11-21",i=n.k5(["light","dark"]),s=n.k5(["inline","fullscreen","pip"]),l=n.k5(["--color-background-primary","--color-background-secondary","--color-background-tertiary","--color-background-inverse","--color-background-ghost","--color-background-info","--color-background-danger","--color-background-success","--color-background-warning","--color-background-disabled","--color-text-primary","--color-text-secondary","--color-text-tertiary","--color-text-inverse","--color-text-info","--color-text-danger","--color-text-success","--color-text-warning","--color-text-disabled","--color-text-ghost","--color-border-primary","--color-border-secondary","--color-border-tertiary","--color-border-inverse","--color-border-ghost","--color-border-info","--color-border-danger","--color-border-success","--color-border-warning","--color-border-disabled","--color-ring-primary","--color-ring-secondary","--color-ring-inverse","--color-ring-info","--color-ring-danger","--color-ring-success","--color-ring-warning","--font-sans","--font-mono","--font-weight-normal","--font-weight-medium","--font-weight-semibold","--font-weight-bold","--font-text-xs-size","--font-text-sm-size","--font-text-md-size","--font-text-lg-size","--font-heading-xs-size","--font-heading-sm-size","--font-heading-md-size","--font-heading-lg-size","--font-heading-xl-size","--font-heading-2xl-size","--font-heading-3xl-size","--font-text-xs-line-height","--font-text-sm-line-height","--font-text-md-line-height","--font-text-lg-line-height","--font-heading-xs-line-height","--font-heading-sm-line-height","--font-heading-md-line-height","--font-heading-lg-line-height","--font-heading-xl-line-height","--font-heading-2xl-line-height","--font-heading-3xl-line-height","--border-radius-xs","--border-radius-sm","--border-radius-md","--border-radius-lg","--border-radius-xl","--border-radius-full","--border-width-regular","--shadow-hairline","--shadow-sm","--shadow-md","--shadow-lg"]),c=n.g1(l,n.Yj()),u=n.Ik({fonts:n.Yj().optional()}),d=n.Ik({variables:c.optional(),css:u.optional()}),p=a.F0.extend({method:n.eu("ui/open-link"),params:n.Ik({url:n.Yj().url()})}),m=n.Ik({isError:n.zM().optional()}),g=a.F0.extend({method:n.eu("ui/message"),params:n.Ik({role:n.eu("user"),content:n.YO(a.WK)})}),h=n.Ik({isError:n.zM().optional()}),y=n.Ik({method:n.eu("ui/notifications/sandbox-proxy-ready"),params:n.Ik({})});n.Ik({method:n.eu("ui/notifications/sandbox-resource-ready"),params:n.Ik({html:n.Yj(),sandbox:n.Yj().optional()})});let f=n.Ik({method:n.eu("ui/notifications/size-changed"),params:n.Ik({width:n.ai().optional(),height:n.ai().optional()})}),_=n.Ik({method:n.eu("ui/notifications/tool-input"),params:n.Ik({arguments:n.g1(n.Yj(),n.L5()).optional()})}),v=n.Ik({method:n.eu("ui/notifications/tool-input-partial"),params:n.Ik({arguments:n.g1(n.Yj(),n.L5()).optional()})}),b=n.Ik({method:n.eu("ui/notifications/tool-result"),params:a.TF}),x=n.Ik({toolInfo:n.Ik({id:a.UJ,tool:a.Dn}).optional(),theme:i.optional(),styles:d.optional(),displayMode:s.optional(),availableDisplayModes:n.YO(n.Yj()).optional(),viewport:n.Ik({width:n.ai(),height:n.ai(),maxHeight:n.ai().optional(),maxWidth:n.ai().optional()}).optional(),locale:n.Yj().optional(),timeZone:n.Yj().optional(),userAgent:n.Yj().optional(),platform:n.k5(["web","desktop","mobile"]).optional(),deviceCapabilities:n.Ik({touch:n.zM().optional(),hover:n.zM().optional()}).optional(),safeAreaInsets:n.Ik({top:n.ai(),right:n.ai(),bottom:n.ai(),left:n.ai()}).optional()}),k=n.Ik({method:n.eu("ui/notifications/host-context-changed"),params:x});a.F0.extend({method:n.eu("ui/resource-teardown"),params:n.Ik({})});let Y=a.wR,I=n.Ik({experimental:n.Ik({}).optional(),openLinks:n.Ik({}).optional(),serverTools:n.Ik({listChanged:n.zM().optional()}).optional(),serverResources:n.Ik({listChanged:n.zM().optional()}).optional(),logging:n.Ik({}).optional()}),w=n.Ik({experimental:n.Ik({}).optional(),tools:n.Ik({listChanged:n.zM().optional()}).optional()}),j=a.F0.extend({method:n.eu("ui/initialize"),params:n.Ik({appInfo:a.a8,appCapabilities:w,protocolVersion:n.Yj()})}),S=n.Ik({protocolVersion:n.Yj(),hostInfo:a.a8,hostCapabilities:I,hostContext:x}),C=n.Ik({method:n.eu("ui/notifications/initialized"),params:n.Ik({}).optional()}),O=n.Ik({connectDomains:n.YO(n.Yj()).optional(),resourceDomains:n.YO(n.Yj()).optional()}),z=n.Ik({csp:O.optional(),domain:n.Yj().optional(),prefersBorder:n.zM().optional()}),E=a.F0.extend({method:n.eu("ui/request-display-mode"),params:n.Ik({mode:s})});n.Ik({mode:s})},0x14c0dfde7:(e,t,o)=>{o.d(t,{u3:()=>y,oQ:()=>_,p9:()=>f});var a=o(0x14de19ae8),n=o(0x18e5c6e75),r=o(0xac309a83),i=o(0x253a5c787),s=o(0x1ea21c42d),l=o.n(s),c=o(0xfc89b4a4),u=o(0x3797c34f);function d(e){var t,o,a,n,r,i,s,l,c;return{name:e.name,description:null!=(t=e.description)?t:void 0,annotations:e.annotations?{title:null!=(o=e.annotations.title)?o:void 0,readOnlyHint:null!=(a=e.annotations.readOnlyHint)?a:void 0,destructiveHint:null!=(n=e.annotations.destructiveHint)?n:void 0,idempotentHint:null!=(r=e.annotations.idempotentHint)?r:void 0,openWorldHint:null!=(i=e.annotations.openWorldHint)?i:void 0}:void 0,inputSchema:{...e.inputSchema,properties:null!=(s=e.inputSchema.properties)?s:void 0,required:null!=(l=e.inputSchema.required)?l:void 0},displayName:e.displayName,enabledKey:e.enabled_key,alwaysApprovedKey:e.always_approved_key,_meta:null!=(c=e._meta)?c:void 0}}function p(e){var t,o,a,n;return{name:e.name,description:null!=(o=e.description)?o:void 0,title:null!=(a=e.title)?a:void 0,arguments:null==(t=e.arguments)?void 0:t.map(e=>{var t,o;return{name:e.name,description:null!=(t=e.description)?t:void 0,required:null!=(o=e.required)?o:void 0}}),_meta:null!=(n=e._meta)?n:void 0,displayName:e.displayName}}function m(e){var t,o,a,n,r,i;return{uri:e.uri,name:e.name,description:null!=(t=e.description)?t:void 0,title:null!=(o=e.title)?o:void 0,mimeType:null!=(a=e.mimeType)?a:void 0,size:null!=(n=e.size)?n:void 0,annotations:null!=(r=e.annotations)?r:void 0,_meta:null!=(i=e._meta)?i:void 0,displayName:e.displayName}}var g=o(0xe824fb1c),h=o(0x1db5af03);function y(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];g.eZ.getState().setRemoteIsLoading(!0),h.O.getState().clearServersNeedingWebsocketRetry();let a=[],r=()=>{if(0!==a.length){for(let e of a){let a=g.eZ.getState();if("server_base"===e.type){let t={uuid:e.uuid,name:e.name,url:e.url,custom_oauth_client_id:e.custom_oauth_client_id,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:e.usedAuthentication};e.connected&&(0,g.nd)(e.uuid)&&(0,g.s$)(e.uuid)&&((0,g.rD)(t),(0,g.I3)(t.uuid,t.url,o)),e.connected?(0,g.n3)(e.uuid,e.usedAuthentication):(h.O.getState().addServerNeedingWebsocketRetry(t),a.removeRemoteServer(e.uuid))}else if("tools"===e.type){let o=e.tools||[],r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(d)}(t?(0,n.M)(o):o);a.setRemoteTools(e.uuid,r),o.some(e=>e._meta&&"string"==typeof e._meta[u.CG])&&(0,g.QO)(e.uuid,!0)}else if("resources"===e.type){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(m)}(e.resources);a.setRemoteResources(e.uuid,t)}else if("prompts"===e.type){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(p)}(e.prompts);a.setRemotePrompts(e.uuid,t)}}a.length=0}},s=l()(r,300,{leading:!0,trailing:!0}),c=new EventSource("/api/organizations/".concat(e,"/mcp/v2/bootstrap"),{withCredentials:!0});return c.onerror=()=>{s.cancel(),r(),c.close(),g.eZ.getState().setRemoteIsLoading(!1),(0,g.IT)(!0),h.O.getState().clearServersNeedingWebsocketRetry(),(0,i.Cp)(Error("MCP bootstrap stream error"),{tags:{action:"mcp_bootstrap_stream_error"},extra:{orgUuid:e}})},c.addEventListener("server_list",t=>{try{let{servers:e}=JSON.parse(t.data);for(let t of(g.eZ.getState().setRemoteIsLoading(!1),(0,g.IT)(!0),e))if((0,g.nd)(t.uuid)){let e={uuid:t.uuid,name:t.name,url:t.url,custom_oauth_client_id:null,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:!1};(0,g.rD)(e),(0,g.I3)(e.uuid,e.url,o)}}catch(o){(0,i.Cp)(o,{tags:{action:"mcp_bootstrap_stream_server_list_parse"},extra:{orgUuid:e,eventData:t.data}})}}),c.addEventListener("server_base",t=>{try{let e=JSON.parse(t.data);a.push({type:"server_base",...e}),s()}catch(o){(0,i.Cp)(o,{tags:{action:"mcp_bootstrap_stream_server_base_parse"},extra:{orgUuid:e,eventData:t.data}})}}),c.addEventListener("tools",t=>{try{let{server_uuid:e,tools:o}=JSON.parse(t.data);a.push({type:"tools",uuid:e,tools:o}),s()}catch(o){(0,i.Cp)(o,{tags:{action:"mcp_bootstrap_stream_tools_parse"},extra:{orgUuid:e,eventData:t.data}})}}),c.addEventListener("resources",t=>{try{let{server_uuid:e,resources:o}=JSON.parse(t.data);a.push({type:"resources",uuid:e,resources:o}),s()}catch(o){(0,i.Cp)(o,{tags:{action:"mcp_bootstrap_stream_resources_parse"},extra:{orgUuid:e,eventData:t.data}})}}),c.addEventListener("prompts",t=>{try{let{server_uuid:e,prompts:o}=JSON.parse(t.data);a.push({type:"prompts",uuid:e,prompts:o}),s()}catch(o){(0,i.Cp)(o,{tags:{action:"mcp_bootstrap_stream_prompts_parse"},extra:{orgUuid:e,eventData:t.data}})}}),c.addEventListener("completed",()=>{s.cancel(),r(),c.close(),g.eZ.getState().setRemoteIsLoading(!1),(0,g.IT)(!0)}),()=>{s.cancel(),c.close()}}let f=()=>(0,r.fS)("mcp_tb_sessions");function _(e){let{activeOrganization:t}=(0,a.YL)(),o=null==t?void 0:t.uuid,n=(0,r.fS)("claude_ai_unicode_sanitize_mcp_data"),i=f();(0,c.useEffect)(()=>{if(o&&i)return y(o,n,e)},[i,o,n,e])}},0x1c9d93a5f:(e,t,o)=>{o.d(t,{h:()=>n});var a=o(0x10e01d04d);class n{async start(){window.addEventListener("message",this.messageListener)}async send(e,t){console.info("[host] Sending message",e),this.eventTarget.postMessage(e,"*")}async close(){var e;window.removeEventListener("message",this.messageListener),null==(e=this.onclose)||e.call(this)}constructor(e=window.parent,t){this.eventTarget=e,this.eventSource=t,this.messageListener=e=>{var o,n;if(t&&e.source!==this.eventSource)return void console.error("Ignoring message from unknown source",e);let r=a.OR.safeParse(e.data);r.success?(console.info("[host] Parsed message",r.data),null==(o=this.onmessage)||o.call(this,r.data)):(console.error("Failed to parse message",r.error.message,e),null==(n=this.onerror)||n.call(this,Error("Invalid JSON-RPC message received: "+r.error.message)))}}}},0x1d302b010:(e,t,o)=>{o.d(t,{vW:()=>D,R4:()=>N,he:()=>M,qb:()=>E,ll:()=>L,XT:()=>z,eB:()=>O,W3:()=>T,NW:()=>j,lu:()=>w,s:()=>R,p4:()=>A});var a=o(0xf32c56dd),n=o(0x12c9046cd),r=o(0x14de19ae8),i=o(0x139b5e710),s=o(0x49fac030),l=o(0xac309a83),c=o(0x1b813d90),u=o(0x17e725145),d=o(0xfc89b4a4),p=o(0x156c4e43b),m=o(0x14c0dfde7),g=o(0x9cb4c2a2),h=o(0x1c12b3087),y=o(0x597e433e),f=o(0xe824fb1c);function _(e){let t=window.atob(e),o=new ArrayBuffer(t.length),a=new Uint8Array(o);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return o}var v=o(0x1e48e639d),b=o(0x242b93f35);let x=b.Ay.object({uuid:b.Ay.string().uuid(),name:b.Ay.string(),url:b.Ay.string(),created_at:b.Ay.string().datetime(),updated_at:b.Ay.string().datetime(),custom_oauth_client_id:b.Ay.string().nullable().optional(),custom_oauth_client_secret:b.Ay.string().nullable().optional(),is_authenticated:b.Ay.boolean().default(!1)});var k=o(0x21edecce6),Y=o(0x1e841cc7d),I=o(0x18175ce17);let w=()=>(0,l.fS)("papi_mcp"),j=()=>(0,l.fS)("claude_ai_mcp_directory_web_only"),S=p.k5(["safe_for_phi"]),C=p.Ik({type:S,content_hash:p.Yj()});function O(e,t){let o=w(),a=(0,m.p9)();return(0,n.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[s.lA,e],enabled:!a&&o&&!!e,...t,select:e=>p.YO(x).parse(e)})}function z(e,t,o){return(0,n.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),{queryKey:[s.Sm,e,t],enabled:!!e&&!!t,...o,select:e=>x.parse(e)})}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,{track:r}=(0,a.st)(),i=(0,u.useQueryClient)(),c=(0,m.p9)(),d=(0,l.fS)("claude_ai_unicode_sanitize_mcp_data"),p=(0,k.p)();return(0,n.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(a,n,l)=>{var u;c&&((0,f.rD)(a),"directory"===o.source&&(0,f.I3)(a.uuid,a.url,p),(0,m.u3)(e,d)),i.invalidateQueries({queryKey:[s.lA,e]}),i.invalidateQueries({queryKey:[s.qE,e]}),null==(u=t.onSuccess)||u.call(t,a,n,l),r({event_key:"claudeai.mcp.create_server",source:o.source,url:a.url,type:"remote"})}})}function L(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.useQueryClient)(),r=(0,m.p9)(),i=(0,l.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,n.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...o,onSuccess:(n,l,c)=>{var u;(0,f.eg)(t),r?(0,m.u3)(e,i):(a.setQueryData([s.lA,e],e=>{var o;return null!=(o=null==e?void 0:e.filter(e=>e.uuid!==t))?o:[]}),a.invalidateQueries({queryKey:[s.lA,e]})),a.invalidateQueries({queryKey:[s.qE,e]}),null==(u=o.onSuccess)||u.call(o,n,l,c)}})}function T(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.useQueryClient)(),r=(0,m.p9)(),i=(0,l.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,n.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...o,onSettled:()=>{(0,f.Ug)(t)},onSuccess:(t,n,l)=>{var c;r?(0,m.u3)(e,i):a.invalidateQueries({queryKey:[s.lA,e]}),a.invalidateQueries({queryKey:[s.qE,e]}),null==(c=o.onSuccess)||c.call(o,t,n,l)}})}function R(){return(0,l.fS)("mcp_shttp")}function M(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,n.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t,"/clear_cache"),"POST",o)}function A(e){let t=(0,m.p9)(),{activeOrganization:o}=(0,r.YL)(),a=null==o?void 0:o.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!a&&t})}function N(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:o}=(0,r.YL)(),a=null==o?void 0:o.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/mcp/attach_resource"),"POST",{enabled:t&&!!a,...e})}(),t=F(),o=function(){let{setIsUploadingDriveSync:e}=(0,g.oM)(),{setSyncSourceUuids:t}=(0,h.Jy)(e=>({setSyncSourceUuids:e.setSyncSourceUuids})),o=(0,I.kO)(),a=(0,I.qi)(c.v8.GDRIVE),{addError:n}=(0,i.Yf)(),{mutate:r}=(0,Y.EF)({onMutate:()=>{e(!0)},onSuccess:o=>{t(e=>[...e,o.uuid]),e(!1)},onError:t=>{e(!1),n((0,v.J)(t),{error:t})},meta:{noToast:!0}});return(0,d.useCallback)(e=>{o&&a&&r({sync_source_type:c.v8.MCP_RESOURCES,sync_source_config:{server_uuid:a.uuid,resource:{...e}}})},[r,o,a])}(),{addError:s}=(0,i.Yf)(),l=(0,m.p9)(),u=function(){let{addError:e}=(0,i.Yf)(),{track:t}=(0,a.st)(),{handleUpload:o}=(0,g.oM)();return(0,d.useCallback)(async(a,n)=>{try{let e=(await (0,f.KU)(a).readResource({uri:n.uri},{timeout:15e3})).contents.map(e=>{let o;return"text"in e?(o=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(o=_(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([o],n.name,{type:e.mimeType})});e.length>0&&await o(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,o])}(),{setIsUploadingDriveSync:p}=(0,g.oM)();return(0,d.useCallback)(async a=>{let{serverUuid:n,resource:r,onClose:i}=a;if(!l||(0,f.HG)(n,l))return u(n,r);{let a;try{let e=(0,f.KU)(n);a=await e.readResource({uri:r.uri},{timeout:15e3})}catch(e){}try{var c;p(!0);let s=await e({resource:r,server_uuid:n,result:a});(null==(c=r.mimeType)?void 0:c.startsWith("application/vnd.google-apps"))?o(r):t(s),p(!1),null==i||i()}catch(e){p(!1),s("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:n}}})}}},[l,u,p,e,o,t,s])}function D(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:o}=(0,r.YL)(),a=null==o?void 0:o.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/mcp/attach_prompt"),"POST",{enabled:t&&!!a,...e})}(),o=F(),{addError:s}=(0,i.Yf)(),l=(0,m.p9)(),c=function(e){let{track:t}=(0,a.st)(),{addError:o}=(0,i.Yf)(),{handleUpload:n}=(0,g.oM)();return(0,d.useCallback)(async(a,r,i)=>{try{let o=await (0,f.KU)(a).getPrompt({name:r.name,arguments:i},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(i).length,assistant_messages:o.messages.filter(e=>"assistant"===e.role).length,user_messages:o.messages.filter(e=>"user"===e.role).length,text_messages:o.messages.filter(e=>"text"===e.content.type).length,image_messages:o.messages.filter(e=>"image"===e.content.type).length});let s=(e,t)=>{let o=e=>{let t=y._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(r.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=o(e.content.mimeType);return new File([_(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var n;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(n=t.mimeType)?n:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=o(t.mimeType);return new File([_(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===o.messages.length)await n([s(o.messages[0],0)]);else if(o.messages.length>1){let e=o.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[s(e,t)]:[]),t=o.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let o=JSON.stringify(t,null,2);e.push(new File([o],"".concat(r.name,"_messages.json"),{type:"application/json"}))}await n(e)}null==e||e()}catch(e){o("Failed to get prompt. You can try again.",{error:e})}},[t,o,n,e])}(e);return(0,d.useCallback)(async a=>{let{serverUuid:n,prompt:r,args:i}=a;if(!l||(0,f.HG)(n,l))return c(n,r,i);{let a;try{let e=(0,f.KU)(n);a=await e.getPrompt({name:r.name,arguments:i},{timeout:15e3})}catch(e){}try{let s=await t({prompt:r,arguments:i,server_uuid:n,result:a});o(s),null==e||e()}catch(e){s("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:n}}})}}},[t,o,s,e,l,c])}function F(){let{setAttachments:e,setFiles:t}=(0,h.Jy)(e=>({setAttachments:e.setAttachments,setFiles:e.setFiles}));return(0,d.useCallback)(o=>{let{files:a,attachments:n}=o;a&&a.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...a.filter(e=>!t.has(e.file_uuid))]}),n&&n.length>0&&e(e=>Array.from(new Set([...e,...n].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}p.Ik({name:p.Yj(),url:p.Yj(),custom_oauth_client_id:p.Yj().nullable().optional(),custom_oauth_client_secret:p.Yj().nullable().optional(),attestations:p.YO(C).nullable().optional()}),p.Ik({name:p.Yj().optional().nullable(),url:p.Yj().optional().nullable()})},0x1e48e639d:(e,t,o)=>{o.d(t,{J:()=>n});var a=o(0x1016c6ed2);function n(e){let t="Unable to add Google Doc.";return e instanceof a.LG&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},0x21edecce6:(e,t,o)=>{o.d(t,{p:()=>x});var a=o(0x139b5e710),n=o(0xac309a83),r=o(0xd126dc1a),i=o(0x20892a038),s=o(0xfc89b4a4),l=o(0x1b813d90),c=o(0x81a5987a),u=o(0x156c4e43b);let d=c.$L.f,p=u.Ik({field:u.k5(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:u.Yj()}),m=u.Ik({uuid:u.Yj(),name:u.Yj(),oneLiner:u.Yj(),description:u.Yj(),iconUrl:u.Yj().optional(),toolNames:u.YO(u.Yj()),promptNames:u.YO(u.Yj()),license:u.Yj().optional(),version:u.Yj().optional(),author:u.Ik({name:u.Yj().optional(),url:u.Yj().optional()}).optional(),documentation:u.Yj().optional(),support:u.Yj().optional(),privacyPolicy:u.Yj().optional(),requiredFields:u.YO(p).optional()});m.and(u.Ik({type:u.k5(["firstParty"]),syncSourceType:u.k5([l.v8.GDRIVE,l.v8.GMAIL,l.v8.GCAL,l.v8.SLACK])}));let g=m.and(u.Ik({type:u.k5(["remote"]),isAuthless:u.zM()}).and(u.KC([u.Ik({url:u.Yj(),urlRegex:u.Vx()}),u.Ik({url:u.Vx(),urlRegex:u.Yj()})])));m.and(u.Ik({type:u.k5(["local"]),manifest:d,onDiskPath:u.Yj().optional(),downloadCount:u.ai().optional(),lifetimeDownloadCount:u.ai().optional(),isBlocklisted:u.zM().optional(),isInternal:u.zM().optional(),isAllowlisted:u.zM().optional()}));let h=u.YO(g),y=u.Ik({uuid:u.Yj(),type:u.k5(["remote","local"]),oneLiner:u.Yj(),iconUrl:u.Yj(),documentation:u.Yj(),support:u.Yj(),privacyPolicy:u.Yj(),author:u.Ik({name:u.Yj(),url:u.Yj()}),worksWith:u.YO(u.k5(["claude","claude-api","claude-code","claude-desktop"])),toolNames:u.YO(u.Yj()).optional(),promptNames:u.YO(u.Yj()).optional(),isAuthless:u.zM().optional(),urlRegex:u.Yj().optional(),requiredFields:u.YO(u.Ik({field:u.k5(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:u.Yj()})).optional(),useCases:u.YO(u.Yj()).optional(),permissions:u.Yj().optional(),claudeCodeCopyText:u.Yj().optional(),claudeCodeExternalLink:u.Yj().optional(),slug:u.Yj().optional(),logo:u.Yj().optional(),backgroundPattern:u.Yj().optional(),heroVideoId:u.Yj().optional(),heroVideoPreviewLink:u.Yj().optional(),htmlContent:u.Yj().optional(),itemId:u.Yj().optional(),collectionId:u.Yj().optional(),localeId:u.Yj().optional()}),f=u.Ik({server:u.Ik({name:u.Yj(),version:u.Yj(),title:u.Yj(),description:u.Yj().optional(),remotes:u.YO(u.Ik({type:u.Yj(),url:u.Yj()})).optional(),repository:u.Ik({url:u.Yj().optional(),source:u.Yj().optional()}).optional()}),_meta:u.Ik({"com.anthropic.api/mcp-registry":y})}),_=u.Ik({servers:u.YO(f),metadata:u.Ik({count:u.ai(),nextCursor:u.Yj().optional()})});function v(e){var t,o,a;let n=e._meta["com.anthropic.api/mcp-registry"],r=null==(o=e.server.remotes)||null==(t=o.find(e=>"streamable-http"===e.type||"sse"===e.type))?void 0:t.url;if(!r&&!n.urlRegex)return null;let i={uuid:n.uuid,name:e.server.title,oneLiner:n.oneLiner,description:e.server.description||"",iconUrl:n.iconUrl,toolNames:n.toolNames||[],promptNames:n.promptNames||[],version:e.server.version,author:n.author,documentation:n.documentation,support:n.support,privacyPolicy:n.privacyPolicy,requiredFields:n.requiredFields,type:"remote",isAuthless:null==(a=n.isAuthless)||a};return n.urlRegex?{...i,url:void 0,urlRegex:n.urlRegex}:{...i,url:r,urlRegex:void 0}}async function b(){let e,t=[];do{let o=new URL("https://api.anthropic.com/mcp-registry/v0/servers");o.searchParams.set("version","latest"),o.searchParams.set("limit","100"),e&&o.searchParams.set("cursor",e);let a=await fetch(o.toString());if(!a.ok)throw Error("HTTP ".concat(a.status));let n=await a.json(),r=_.safeParse(n);if(!r.success)throw Error("Invalid response format");let i=r.data.servers.map(v).filter(e=>null!==e);t.push(...i),e=r.data.metadata.nextCursor}while(e);return t}let x=()=>{let e=(0,n.fS)("use_unified_mcp_directory_claude_ai"),{addError:t}=(0,a.Yf)(),o=(0,s.useRef)(!1),{data:l,error:c}=(0,i.useQuery)({queryKey:["unified-mcp-directory"],queryFn:b,staleTime:18e5,gcTime:18e5,enabled:e});(0,s.useEffect)(()=>{c&&!o.current&&(o.current=!0,t("Could not load connectors directory.",{error:c,errorContext:{tags:{source:"unified_mcp_directory_fetch"}}}))},[c,t]);let u=(0,n.T9)("mcp_directory_servers","servers",[],h),d=(0,n.T9)("mcp_directory_servers_2","servers",[],h),p=(0,n.T9)("conditional_mcp_directory_servers","servers",[],h),m=u.concat(d).concat(p);return(0,r.f)(e?null!=l?l:[]:m)}}}]);