try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="556f5bd9-2af3-4140-ae24-3a4fcc538fbf",e._sentryDebugIdIdentifier="sentry-dbid-556f5bd9-2af3-4140-ae24-3a4fcc538fbf")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37635],{0x143216d6:(e,a,t)=>{t.d(a,{n:()=>j});var l=t(0x22102fd88),r=t(0x24553dffe),n=t(0x1bdad8807),o=t(0x14023fbb8),i=t(0xa60407d2),s=t(0xdf5c3676),u=t(0x20e00cddd),d=t(0x1f0218c95),c=t(0x1a1f6dda6),p=t(0xfc89b4a4),m=t(0x1ab0d1ca1),b=t(0x23e1b1f63),f=t(0xf32c56dd),y=t(0x14de19ae8),h=t(0x865ff458),g=t(0x215f3d6df),_=t(0x225bae024),v=t(0x246846ae8),x=t(0xdc8aa2c8),A=t(0x5878331c),T=t.n(A);let k=[{key:"ad_nrt",label:"Andorran NRT number",countries:["AD"],placeholder:"A-123456-Z"},{key:"ar_cuit",label:"Argentinian tax ID number",countries:["AR"],placeholder:"12-3456789-01"},{key:"au_abn",label:"Australian Business Number (AU ABN)",countries:["AU"],placeholder:"12345678912"},{key:"au_arn",label:"Australian Taxation Office Reference Number",countries:["AU"],placeholder:"123456789123"},{key:"eu_vat",label:"European VAT number",countries:["AT"],placeholder:"ATU12345678"},{key:"eu_vat",label:"European VAT number",countries:["BE"],placeholder:"BE0123456789"},{key:"bo_tin",label:"Bolivian tax ID",countries:["BO"],placeholder:"123456789"},{key:"br_cnpj",label:"Brazilian CNPJ number",countries:["BR"],placeholder:"01.234.456/5432-10"},{key:"br_cpf",label:"Brazilian CPF number",countries:["BR"],placeholder:"123.456.789-87"},{key:"bg_uic",label:"Bulgaria Unified Identification Code",countries:["BG"],placeholder:"123456789"},{key:"eu_vat",label:"European VAT number",countries:["BG"],placeholder:"BG0123456789"},{key:"ca_bn",label:"Canadian BN",countries:["CA"],placeholder:"123456789"},{key:"ca_gst_hst",label:"Canadian GST/HST number",countries:["CA"],placeholder:"123456789RT0002"},{key:"ca_pst_bc",label:"Canadian PST number (BC)",countries:["CA"],placeholder:"PST-1234-5678"},{key:"ca_pst_mb",label:"Canadian PST number (MB)",countries:["CA"],placeholder:"123456-7"},{key:"ca_pst_sk",label:"Canadian PST number (SK)",countries:["CA"],placeholder:"1234567"},{key:"ca_qst",label:"Canadian QST number (Qu\xe9bec)",countries:["CA"],placeholder:"1234567890TQ1234"},{key:"cl_tin",label:"Chilean TIN",countries:["CL"],placeholder:"12.345.678-K"},{key:"cn_tin",label:"Chinese tax ID",countries:["CN"],placeholder:"123456789012345678"},{key:"co_nit",label:"Colombian NIT number",countries:["CO"],placeholder:"123.456.789-0"},{key:"cr_tin",label:"Costa Rican tax ID",countries:["CR"],placeholder:"1-234-567890"},{key:"eu_vat",label:"European VAT number",countries:["HR"],placeholder:"HR12345678912"},{key:"eu_vat",label:"European VAT number",countries:["CY"],placeholder:"CY12345678Z"},{key:"eu_vat",label:"European VAT number",countries:["CZ"],placeholder:"CZ1234567890"},{key:"eu_vat",label:"European VAT number",countries:["DK"],placeholder:"DK12345678"},{key:"do_rcn",label:"Dominican RCN number",countries:["DO"],placeholder:"123-4567890-1"},{key:"ec_ruc",label:"Ecuadorian RUC number",countries:["EC"],placeholder:"1234567890001"},{key:"eg_tin",label:"Egyptian TIN",countries:["EG"],placeholder:"123456789"},{key:"sv_nit",label:"El Salvadorian NIT number",countries:["SV"],placeholder:"1234-567890-123-4"},{key:"eu_vat",label:"European VAT number",countries:["EE"],placeholder:"EE123456789"},{key:"eu_oss_vat",label:"European One Stop Shop VAT number",countries:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"],placeholder:"EU123456789",last:!0},{key:"eu_vat",label:"European VAT number",countries:["FI"],placeholder:"FI12345678"},{key:"eu_vat",label:"European VAT number",countries:["FR"],placeholder:"FRAB123456789"},{key:"ge_vat",label:"Georgian VAT",countries:["GE"],placeholder:"123456789"},{key:"eu_vat",label:"European VAT number",countries:["DE"],placeholder:"DE123456789"},{key:"eu_vat",label:"European VAT number",countries:["GR"],placeholder:"EL123456789"},{key:"hk_br",label:"Hong Kong BR number",countries:["HK"],placeholder:"12345678"},{key:"eu_vat",label:"European VAT number",countries:["HU"],placeholder:"HU12345678"},{key:"hu_tin",label:"Hungary tax number (ad\xf3sz\xe1m)",countries:["HU"],placeholder:"12345678-1-23"},{key:"is_vat",label:"Icelandic VAT",countries:["IS"],placeholder:"123456"},{key:"in_gst",label:"Indian GST number",countries:["IN"],placeholder:"12ABCDE3456FGZH"},{key:"id_npwp",label:"Indonesian NPWP number",countries:["ID"],placeholder:"12.345.678.9-012.345"},{key:"eu_vat",label:"European VAT number",countries:["IE"],placeholder:"IE1234567AB"},{key:"il_vat",label:"Israel VAT",countries:["IL"],placeholder:"000012345"},{key:"eu_vat",label:"European VAT number",countries:["IT"],placeholder:"IT12345678912"},{key:"jp_cn",label:"Japanese Corporate Number",countries:["JP"],placeholder:"1234567891234"},{key:"jp_rn",label:"Japanese Registered Foreign Businesses’ Registration Number",countries:["JP"],placeholder:"12345"},{key:"jp_trn",label:"Japanese Tax Registration Number",countries:["JP"],placeholder:"T1234567891234"},{key:"ke_pin",label:"KRA PIN",countries:["KE"],placeholder:"P000111111A"},{key:"eu_vat",label:"European VAT number",countries:["LV"],placeholder:"LV12345678912"},{key:"li_uid",label:"Liechtensteinian UID number",countries:["LI"],placeholder:"CHE123456789"},{key:"eu_vat",label:"European VAT number",countries:["LT"],placeholder:"LT123456789123"},{key:"eu_vat",label:"European VAT number",countries:["LU"],placeholder:"LU12345678"},{key:"my_frp",label:"Malaysian FRP number",countries:["MY"],placeholder:"12345678"},{key:"my_itn",label:"Malaysian ITN",countries:["MY"],placeholder:"C 1234567890"},{key:"my_sst",label:"Malaysian SST number",countries:["MY"],placeholder:"A12-3456-78912345"},{key:"eu_vat",label:"European VAT number",countries:["MT"],placeholder:"MT12345678"},{key:"mx_rfc",label:"Mexican RFC number",countries:["MX"],placeholder:"ABC010203AB9"},{key:"eu_vat",label:"European VAT number",countries:["NL"],placeholder:"NL123456789B12"},{key:"nz_gst",label:"New Zealand GST number",countries:["NZ"],placeholder:"123456789"},{key:"no_vat",label:"Norwegian VAT number",countries:["NO"],placeholder:"123456789MVA"},{key:"no_voec",label:"Norwegian VAT on e-commerce number",countries:["NO"],placeholder:"1234567"},{key:"pe_ruc",label:"Peruvian RUC number",countries:["PE"],placeholder:"12345678901"},{key:"ph_tin",label:"Philippines Tax Identification Number",countries:["PH"],placeholder:"123456789012"},{key:"eu_vat",label:"European VAT number",countries:["PL"],placeholder:"PL1234567890"},{key:"eu_vat",label:"European VAT number",countries:["PT"],placeholder:"PT123456789"},{key:"eu_vat",label:"European VAT number",countries:["RO"],placeholder:"RO1234567891"},{key:"ro_tin",label:"Romanian tax ID number",countries:["RO"],placeholder:"1234567890123"},{key:"ru_inn",label:"Russian INN",countries:["RU"],placeholder:"1234567891"},{key:"ru_kpp",label:"Russian KPP",countries:["RU"],placeholder:"123456789"},{key:"sa_vat",label:"Saudi Arabia VAT",countries:["SA"],placeholder:"123456789012345"},{key:"rs_pib",label:"Serbian PIB number",countries:["RS"],placeholder:"123456789"},{key:"sg_gst",label:"Singaporean GST",countries:["SG"],placeholder:"M12345678X"},{key:"sg_uen",label:"Singaporean UEN",countries:["SG"],placeholder:"123456789F"},{key:"eu_vat",label:"European VAT number",countries:["SK"],placeholder:"SK1234567891"},{key:"eu_vat",label:"European VAT number",countries:["SI"],placeholder:"SI12345678"},{key:"si_tin",label:"Slovenia tax number (davčna številka)",countries:["SI"],placeholder:"12345678"},{key:"za_vat",label:"South African VAT number",countries:["ZA"],placeholder:"4123456789"},{key:"kr_brn",label:"Korean BRN",countries:["KR"],placeholder:"123-45-67890"},{key:"es_cif",label:"Spanish NIF number",countries:["ES"],placeholder:"A12345678"},{key:"eu_vat",label:"European VAT number",countries:["ES"],placeholder:"ESA1234567Z"},{key:"eu_vat",label:"European VAT number",countries:["SE"],placeholder:"SE123456789123"},{key:"ch_vat",label:"Switzerland VAT number",countries:["CH"],placeholder:"CHE-123.456.789 MWST"},{key:"tw_vat",label:"Taiwanese VAT",countries:["TW"],placeholder:"12345678"},{key:"th_vat",label:"Thai VAT",countries:["TH"],placeholder:"1234567891234"},{key:"tr_tin",label:"Turkish Tax Identification Number",countries:["TR"],placeholder:"0123456789"},{key:"ua_vat",label:"Ukrainian VAT",countries:["UA"],placeholder:"123456789"},{key:"ae_trn",label:"United Arab Emirates TRN",countries:["AE"],placeholder:"123456789012345"},{key:"eu_vat",label:"Northern Ireland VAT number",countries:["XI"],placeholder:"XI123456789"},{key:"gb_vat",label:"United Kingdom VAT number",countries:["GB"],placeholder:"GB123456789"},{key:"uy_ruc",label:"Uruguayan RUC number",countries:["UY"],placeholder:"123456789012"},{key:"ve_rif",label:"Venezuelan RIF number",countries:["VE"],placeholder:"A-12345678-9"},{key:"vn_tin",label:"Vietnamese tax ID number",countries:["VN"],placeholder:"1234567890"}],E=e=>{let{title:a,subtitle:t,countryCode:r,className:n,inputClassName:o,textClassName:i,taxIdType:s,onTaxIdTypeChange:u,taxId:d,onTaxIdChange:m,size:b,autoSelectFirst:f=!1,disabled:y}=e,h=(0,p.useMemo)(()=>{let e={};return k.forEach(a=>{a.countries.forEach(t=>{t in e?e[t].push(a):e[t]=[a]})}),e},[]),g=(0,p.useMemo)(()=>r&&T().sortBy(h[r],e=>e.last?2:1,e=>e.label)||[],[r,h]),_=(0,p.useMemo)(()=>Object.fromEntries(g.map(e=>[e.key,e])),[g]),A=(0,p.useMemo)(()=>s?_[s]:null,[_,s]),E=g.length>0;return(0,p.useEffect)(()=>{r&&0===g.length&&(u(void 0),m("")),(1===g.length||g.length>0&&f)&&u(g[0].key)},[g,r,m,u,f]),(0,l.jsx)("div",{hidden:!E,children:(0,l.jsxs)("div",{className:(0,c.A)(n,i,"flex flex-col"),children:[(0,l.jsx)("div",{className:(0,c.A)("text-text-100 text-sm",i),children:a}),t&&(0,l.jsx)("div",{className:"text-text-400 text-xs",children:t}),(0,l.jsxs)("div",{className:"mt-2 inline-flex w-full flex-wrap items-center gap-2",children:[1===g.length?(0,l.jsx)("label",{htmlFor:"tax-id-text",className:"text-sm",children:g[0].label}):(0,l.jsx)(x.g,{disabled:!E||y,options:g,placeholder:"Select tax ID type",selected:A,onSelect:e=>{u(e.key),m("")},className:(0,c.A)("min-w-[12rem]",o),textClassName:i,size:b,type:"primary"}),(0,l.jsx)(v.ks,{value:d,id:"tax-id-text",disabled:y,hidden:!A,placeholder:null==A?void 0:A.placeholder,onValueChange:e=>m(e||""),className:(0,c.A)("border-border-200 hover:border-border-100 w-48 border",o),type:"text",size:"md"===b?"default":b})]})]})})};var S=t(0x38e6572),I=t(0x4339cba),C=t(0x5e4a1827),w=t(0xb323e954);function M(e){let{taxId:a,taxIdType:t,isChecked:r,onCheck:n}=e,o=(0,m.A)();return"au_abn"===t&&a.length>0?(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(w.S,{checked:r,onChange:n,label:o.formatMessage({id:"efQ78fRCLf",defaultMessage:"My business is registered for GST and the ABN number I have provided is valid."})})}):null}function N(e){let{onReady:a,onCancel:t,defaultCountry:r,defaultName:n,setAddress:o,setTaxParams:i,onBillingCountryChange:s,onBillingNameChange:u,action:v,children:x,returnPath:A,onPaymentMethodUpdated:T,legalAccepted:k,...I}=e,w=(0,m.A)(),N=(0,f.st)(),j=(0,d.useStripe)(),R=(0,d.useElements)(),{account:V}=(0,y.YL)(),{data:L}=(0,h.Hc)(),{supportedRegions:B}=(0,g.D)("claude-ai"),D=(0,p.useMemo)(()=>B.filter(e=>e.stripe_address_supported).map(e=>e.code),[B]),[U,z]=(0,p.useState)("claude-ai"===I.product?I.companyName:void 0),F=(0,p.useMemo)(()=>"claude-ai"===I.product?{...I,companyName:U}:I,[I,U]),[G,H]=(0,p.useState)(null),[O,K]=(0,p.useState)(!1),[Y,Z]=(0,p.useState)(!1),[W,X]=(0,p.useState)(null),[J,Q]=(0,p.useState)(""),[q,$]=(0,p.useState)(),[ee,ea]=(0,p.useState)(!1),et=(0,p.useMemo)(()=>""!==J&&q?{type:q,value:J}:void 0,[J,q]);(0,p.useEffect)(()=>{null==i||i(et)},[et,i]);let el=P(K,F),{mutateAsync:er,error:en}=(0,b.uS)();(0,p.useEffect)(()=>{en&&H(en.message)},[en]);let eo=(e,a)=>{let t=new URL(e.toString());a&&(t.pathname+="/".concat(a));let l=new URLSearchParams(t.search);return l.set("action","subscribe"),l.set("redirect_status","succeeded"),"claude-ai"===F.product&&F.plan&&l.set("plan",F.plan),t.search=l.toString(),t},ei=async()=>{var e,a,t,l,r,n,o;let i;if(O||!j||!R)return;let s=R.getElement("address");if(!s)return;K(!0);let u=new URL(window.location.origin),d=A.split("?");u.pathname=d[0];let c=new URLSearchParams(d[1]||"");c.set("action",v),"claude-ai"===F.product&&F.plan&&c.set("plan",F.plan),u.search=c.toString();let p="claude-ai"===F.product?F.plan:"team";if("subscribe"===v&&"overages"!==F.product){N.track({event_key:"claudeai.pricing.payment_form_submitted",plan_type:p,product:F.product,billing_interval:F.billingInterval,has_promo:!!L,promo_code:(null==L?void 0:L.proMonthlyPromoCode)||(null==L?void 0:L.proAnnualPromoCode),has_tax_id:!!J});let a=await R.submit();if(a.error)i=a.error;else{let a=(await s.getValue()).value.address,t={line1:a.line1,city:a.city,country:a.country,region:a.state,postalCode:a.postal_code,tax_id:et,billingInterval:F.billingInterval},l=await el(t),r=l.clientSecret;if("setupIntentId"in l&&l.setupIntentId&&!l.organization_id){let a=await j.confirmSetup({elements:R,clientSecret:r,redirect:"if_required",confirmParams:{return_url:u.toString()}});if(a.error||(null==(e=a.setupIntent)?void 0:e.status)!=="succeeded")i=a.error;else{let e={...t,verified_setup_intent_id:a.setupIntent.id,company_name:U,plan:"claude-ai"===F.product?F.plan:void 0};try{let a=await el(e);if(a.clientSecret&&!a.isPendingSetupIntent){let e=eo(u,a.organization_id);i=(await j.confirmPayment({elements:R,clientSecret:a.clientSecret,confirmParams:{return_url:e.toString()}})).error}else{let e=eo(u,a.organization_id);window.location.href=e.toString()}}catch(e){H((e instanceof Error?e.message:void 0)||w.formatMessage({defaultMessage:"Failed to create subscription. Please try again.",id:"2cTonaP1h4"})),K(!1);return}}}else{l.organization_id&&(u.pathname+="/".concat(l.organization_id));let e={elements:R,clientSecret:r,confirmParams:{return_url:u.toString()}};i=(l.isPendingSetupIntent?await j.confirmSetup(e):await j.confirmPayment(e)).error}}(null==i?void 0:i.message)&&"validation_error"!==i.type&&(H(i.message),N.track({event_key:"claudeai.pricing.payment_failed",error_type:i.type,error_code:i.code,error_message:i.message,action:"subscribe",plan_type:p,billing_interval:F.billingInterval})),K(!1)}else if("setup-mobile-subscriber-stripe-payments"===v){let{error:e,setupIntent:i}=await j.confirmSetup({elements:R,redirect:"if_required",confirmParams:{return_url:u.toString()}});if(e)e.message&&"validation_error"!==e.type&&H(e.message),e.type&&"validation_error"!==e.type&&N.track({event_key:"claudeai.pricing.payment_failed",error_type:e.type,error_code:e.code,error_message:e.message,action:"setup_payment_only"});else{let e=null==i?void 0:i.payment_method;e&&"string"!=typeof e?null==T||T({type:e.type,last4:null!=(r=null==(a=e.card)?void 0:a.last4)?r:null,brand:null!=(n=null==(t=e.card)?void 0:t.brand)?n:null,country:null!=(o=null==(l=e.card)?void 0:l.country)?o:null}):null==T||T()}K(!1)}else{let{error:e}=await j.confirmSetup({elements:R,redirect:"if_required",confirmParams:{return_url:u.toString()}});if(e)e.message&&"validation_error"!==e.type&&H(e.message),e.type&&"validation_error"!==e.type&&N.track({event_key:"claudeai.pricing.payment_failed",error_type:e.type,error_code:e.code,error_message:e.message,action:"update_payment_method",product:F.product,plan_type:p,billing_interval:"billingInterval"in F?F.billingInterval:void 0});else try{await er({tax_id:et,remove_tax_id:!et,company_name:U}),T&&T()}catch(e){H((e instanceof Error?e.message:void 0)||w.formatMessage({defaultMessage:"Failed to update tax information. Please try again.",id:"o7RpaY2p01"}))}K(!1)}};(0,p.useEffect)(()=>{let e=null==R?void 0:R.getElement("address");if(!e)return;let a=e=>{let a=e.value.address;X(a),"billingInterval"in F&&o&&o({line1:a.line1,city:a.city,country:a.country,region:a.state,postalCode:a.postal_code,billingInterval:F.billingInterval}),e.value.name&&(z(e.value.name),null==u||u(e.value.name))};return e.on("change",a),()=>{e.off("change",a)}},[R,o,F,u]);let es="subscribe"===v?(0,C.QS)(null==W?void 0:W.country):"setup-mobile-subscriber-stripe-payments"===v?(0,l.jsx)(S.A,{defaultMessage:"Add payment method",id:"+EIsonKmCI"}):(0,l.jsx)(S.A,{defaultMessage:"Update",id:"BWpuKlRSA1"});return(0,l.jsxs)("form",{id:"payment-form",onSubmit:e=>{e.preventDefault(),O||ei()},className:(0,c.A)("subscribe"===v&&"p-5 bg-bg-100 border-0.5 border-border-400 rounded-md text-text-200"),children:["setup-mobile-subscriber-stripe-payments"!==v&&(0,l.jsx)("div",{className:"text-text-000 text-base font-medium mb-4",children:(0,l.jsx)(S.A,{defaultMessage:"Payment method",id:"BVTni9A2ca"})}),(0,l.jsx)(d.AddressElement,{options:{mode:"billing",allowedCountries:D,defaultValues:{name:null!=n?n:null==V?void 0:V.full_name,address:r?{country:r}:void 0}},onChange:e=>{let a=e.value.address.country;a!==(null==W?void 0:W.country)&&($(void 0),Q(""),null==s||s(a))}}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(d.PaymentElement,{id:"payment-element",options:{readOnly:O,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==V?void 0:V.email_address,name:null==V?void 0:V.full_name}}},onReady:()=>{Z(!0),a&&a()}})}),"setup-mobile-subscriber-stripe-payments"!==v&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(E,{title:w.formatMessage({id:"Da5iekR76B",defaultMessage:"Business tax ID (Optional)"}),subtitle:w.formatMessage({id:"ZjBbR8bPvM",defaultMessage:'If you provide a tax ID, the "Full name" above should be your business\'s name.'}),countryCode:null==W?void 0:W.country,taxId:J,onTaxIdChange:e=>{Q(e),ea(!1)},taxIdType:q,onTaxIdTypeChange:e=>{$(e),ea(!1)},inputClassName:"text-md rounded-md flex-grow",textClassName:"font-system text-md",size:"lg"}),(0,l.jsx)(M,{taxId:J,taxIdType:q,isChecked:ee,onCheck:ea})]}),G&&(0,l.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:G}),(0,l.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[x,t&&(0,l.jsx)(_.$,{variant:"secondary",size:"default",onClick:t,children:(0,l.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,l.jsx)(_.$,{type:"submit",loading:O,variant:"primary",className:"subscribe"===v?"py-3 w-full":"",size:"subscribe"===v?"lg":"default",disabled:O||!Y||"setup-mobile-subscriber-stripe-payments"!==v&&"au_abn"===q&&J.length>0&&!ee||"subscribe"===v&&!1===k,children:es})]})]})}let P=(e,a)=>{var t,l;let{mutateAsync:r}=(0,b.Xt)(),{mutateAsync:n}=(0,b.PQ)(),{mutateAsync:o}=(0,b.Nb)(),i="claude-ai"===a.product&&(null==(t=a.trialInfo)?void 0:t.available)===!0&&(null==(l=a.trialInfo)?void 0:l.requires_payment_upfront)===!0,{mutateAsync:s}=(0,b.cR)(),{data:u}=(0,b.jN)({enabled:"overages"!==a.product}),{data:d}=(0,h.Hc)(),c=(null==u?void 0:u.status)==="trialing"&&!(null==u?void 0:u.payment_method);return(0,p.useCallback)(t=>{if("overages"===a.product)throw Error('SetupIntent for "overages" should not create a subscription');if("raven"===a.product)return r({...t,organization_name:a.organizationName,members:[],billingInterval:a.billingInterval,seats_per_tier:a.seatsPerTier},{onError:()=>{e(!1)}});if(c&&!a.plan)return s({billing_interval:a.billingInterval},{onError:()=>{e(!1)}}).then(e=>({clientSecret:e.clientSecret||"",isPendingSetupIntent:!0,organization_id:void 0}));let l=a.promoCode;!l&&(a.billingInterval===I.NW.MONTHLY?a.plan&&a.plan===I.un.FIVE_X&&(null==d?void 0:d.max5xMonthlyPromoCode)?l=null==d?void 0:d.max5xMonthlyPromoCode:a.plan===I.un.TWENTY_X&&(null==d?void 0:d.max20xMonthlyPromoCode)?l=null==d?void 0:d.max20xMonthlyPromoCode:(null==d?void 0:d.proMonthlyPromoCode)&&(l=d.proMonthlyPromoCode):a.billingInterval===I.NW.YEARLY&&(null==d?void 0:d.proAnnualPromoCode)&&(l=d.proAnnualPromoCode));let u="verified_setup_intent_id"in t&&t.verified_setup_intent_id;return i&&!u?o({...t,company_name:a.companyName,billingInterval:a.billingInterval,promoCode:l,plan:a.plan||"pro"}).catch(()=>{throw e(!1),Error("Failed to create payment verification")}):n({...t,company_name:a.companyName,billingInterval:a.billingInterval,promoCode:l,plan:a.plan},{onError:()=>{e(!1)}})},[a,r,n,o,s,e,d,c,i])};function j(e){let a,{defaultCountry:t,isLoading:o=!1,amount:f,currency:y,setAddress:h,setTaxParams:g,action:_,children:v,className:x,returnPath:A,onCancel:T,onPaymentMethodUpdated:k,legalAccepted:E,...S}=e,I=(0,m.A)(),[C,w]=(0,p.useState)(!0),{theme:M,mode:P}=(0,s.D)(),j=(0,r.l)(),[V,L]=(0,p.useState)(t),[B,D]=(0,p.useState)(),U=(0,n.Ak)(V),z=(0,n.Ri)("update"===_,V,U),{mutate:F,data:G,isPending:H}=(0,b.k6)();(0,p.useEffect)(()=>{"setup-mobile-subscriber-stripe-payments"!==_||G||H||F()},[_,G,H,F]);let O="setup-mobile-subscriber-stripe-payments"===_?G:z,K="subscribe"===_?U:(null==O?void 0:O.entity)||U,Y=(0,n.ib)(K);(0,p.useEffect)(()=>{w(!0)},[K]);let Z=j.get(u.eT.COLOR_MODE),W={loader:"never",appearance:{theme:"stripe",variables:{fontSizeBase:"16px",colorBackground:(0,i.w)(M,P,Z,"bg-000"),colorText:(0,i.w)(M,P,Z,"text-100")}},locale:(0,n.bN)(I.locale)},X=!0;return"subscribe"===_?a={mode:"subscription",amount:f,currency:null==y?void 0:y.toLowerCase(),payment_method_types:["card","link"],...W}:(X=!!O,a={clientSecret:null==O?void 0:O.clientSecret,...W}),(0,l.jsxs)("div",{className:(0,c.A)("relative",x),style:{minHeight:"460px"},children:[X&&!o&&(0,l.jsx)("div",{className:(0,c.A)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":C||o}),children:(0,l.jsx)(d.Elements,{options:a,stripe:Y,children:(0,l.jsx)(N,{onReady:()=>w(!1),defaultCountry:V,defaultName:B,setTaxParams:g,onBillingCountryChange:L,onBillingNameChange:D,returnPath:A,onCancel:T,onPaymentMethodUpdated:k,legalAccepted:E,..."setup-mobile-subscriber-stripe-payments"===_?{action:_,product:"overages"}:{action:_,setAddress:h,...S},children:v})},K)}),(C||o)&&(0,l.jsx)(R,{})]})}let R=()=>(0,l.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,l.jsx)(o.R,{})})},0x28db2c9a:(e,a,t)=>{t.d(a,{c:()=>i,j:()=>s});var l=t(0x22102fd88),r=t(0x1a1f6dda6),n=t(0xfc89b4a4),o=t(0x38e6572);let i=e=>{let{repeat:a,children:t}=e;return(0,l.jsx)(l.Fragment,{children:Array.from({length:a}).map((e,a)=>(0,l.jsx)(n.Fragment,{children:t},a))})};function s(e){let{className:a,height:t=24,width:i,rounded:s="md",variant:u="light"}=e,d=(0,n.useRef)(null),c={height:t,width:"number"==typeof i||"string"==typeof i?i:"object"==typeof i?(null===d.current&&(d.current=Math.round(Math.random()*(i.max-i.min))+i.min),d.current):"100%",maxWidth:"100%"};return(0,l.jsx)("div",{className:(0,r.A)("light"===u?"relative bg-bg-400 overflow-hidden after:absolute after:inset-0 after:translate-x-[-100%] after:bg-gradient-to-r after:from-bg-000/0 after:from-0% after:via-bg-000/20 after:via-50% after:to-100% after:to-bg-000/0 after:animate-[shimmer_1.5s_infinite]":"relative bg-text-500/50 overflow-hidden after:absolute after:inset-0 after:translate-x-[-100%] after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0 after:animate-[shimmer_1.5s_infinite]",a,{"rounded-full":"full"===s,"rounded-xl":"xl"===s,"rounded-lg":"lg"===s,"rounded-md":"md"===s,"rounded-sm":"sm"===s}),style:c,children:(0,l.jsx)("span",{className:"sr-only",children:(0,l.jsx)(o.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}},0x5e4a1827:(e,a,t)=>{t.d(a,{CB:()=>s,He:()=>u,Hm:()=>d,QS:()=>c});var l=t(0x22102fd88),r=t(0x38e6572),n=t(0x4339cba),o=t(0x8b87af3b),i=t(0x21870d616);let s=e=>{switch(e){case"free":return(0,l.jsx)(i.NodeSprout,{size:"small"});case"claude_pro":return(0,l.jsx)(i.NodePlant,{size:"small"});case"claude_max":return(0,l.jsx)(i.NodeTree,{size:"small"})}},u=(e,a)=>{switch(e){case"raven":return a?(0,l.jsx)(r.A,{defaultMessage:"Enterprise plan",id:"0g7deXDj3b"}):(0,l.jsx)(r.A,{defaultMessage:"Team plan",id:"idguOo+PzU"});case"free":return(0,l.jsx)(r.A,{defaultMessage:"Free plan",id:"B+7815cfpz"});case"claude_pro":return(0,l.jsx)(r.A,{defaultMessage:"Pro plan",id:"P0xe8AvKVP"});case"claude_max":return(0,l.jsx)(r.A,{defaultMessage:"Max plan",id:"yC6ECfKPIQ"})}},d=(e,a,t)=>"free"===e?(0,l.jsx)(r.A,{defaultMessage:"Try Claude",id:"pZ4CtGSlwT"}):"claude_pro"===e&&a===n.NW.YEARLY?(0,l.jsx)(r.A,{defaultMessage:"Annual",id:"2C6TrW95uE"}):"claude_pro"===e&&a===n.NW.MONTHLY?(0,l.jsx)(r.A,{defaultMessage:"Monthly",id:"wYsv4ZHu+B"}):"claude_max"===e&&t===n.un.FIVE_X?(0,l.jsx)(r.A,{defaultMessage:"5x more usage than Pro",id:"Mqu1u9b9B1"}):"claude_max"===e&&t===n.un.TWENTY_X?(0,l.jsx)(r.A,{defaultMessage:"20x more usage than Pro",id:"YIkI1PRwfs"}):void 0,c=e=>e&&(0,o.b)(e)?(0,l.jsx)(r.A,{defaultMessage:"Subscribe and Pay",id:"Zt/6SnhrDf"}):(0,l.jsx)(r.A,{defaultMessage:"Subscribe",id:"gczcC5Leue"})},0x8b87af3b:(e,a,t)=>{t.d(a,{b:()=>r});let l=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],r=e=>l.includes(e.toUpperCase())||"GB"===e.toUpperCase()},0xa60407d2:(e,a,t)=>{t.d(a,{w:()=>r});var l=t(0xfc89b4a4);let r=(e,a,t,r)=>(0,l.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(String(r))),")")}},[t,r,a,e])},0xbb84ce70:(e,a,t)=>{t.d(a,{c:()=>l.c,j:()=>l.j});var l=t(0x28db2c9a)},0xdf5c3676:(e,a,t)=>{t.d(a,{D:()=>l.D});var l=t(0x17fe12c57)},0x14023fbb8:(e,a,t)=>{t.d(a,{R:()=>l.Loading});var l=t(0x78375882)},0x17fe12c57:(e,a,t)=>{t.d(a,{ThemeProvider:()=>d,D:()=>f});var l=t(0x22102fd88),r=t(0x24553dffe),n=t(0xb804d868),o=t(0x20e00cddd),i=t(0xfc89b4a4);let s="(prefers-color-scheme: dark)",u=(0,i.createContext)(void 0);function d(e){let{initialTheme:a,children:t}=e,[o,d]=(0,i.useState)(a),m=(0,r.l)(),[f,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{y(!0)},[]);let[h,g]=(0,n.Vc)("userThemeMode","auto"),[_,v]=(0,i.useState)(b(h));(0,i.useEffect)(()=>{v(b(h))},[h]),(0,i.useEffect)(()=>c(o),[o]),(0,i.useEffect)(()=>p(h,m),[m,h]);let x=(0,i.useCallback)(()=>{p(h,m),v(b(h))},[m,h]);return(0,i.useEffect)(()=>{if("auto"!==h)return;let e=window.matchMedia(s);return e.addEventListener("change",x),()=>e.removeEventListener("change",x)},[h,x]),(0,i.useEffect)(()=>{var e,a;null==(a=window.electronWindowControl)||null==(e=a.setThemeMode)||e.call(a,"auto"===h?"system":h)},[h]),(0,l.jsx)(u.Provider,{value:{theme:o,mode:h,setMode:g,setTheme:d,resolvedMode:_,mounted:f},children:t})}let c=e=>{"undefined"!=typeof document&&(document.documentElement.dataset.theme=e,m())},p=(e,a)=>{if("undefined"==typeof document)return;let t=b(e);a.set(o.eT.COLOR_MODE,t),document.documentElement.dataset.mode=t,m()},m=()=>{let[e,a,t]=getComputedStyle(document.documentElement).getPropertyValue("--bg-200").split(" "),l="hsl(".concat(e,",").concat(a,",").concat(t,")"),r=document.querySelector('meta[name="theme-color"]');r||((r=document.createElement("meta")).setAttribute("name","theme-color"),document.head.appendChild(r)),r.setAttribute("content",l)},b=e=>{var a;return"auto"!==e?"auto"===e?"light":e:(null==(a=window)?void 0:a.matchMedia(s).matches)?"dark":"light"},f=()=>{let e=(0,i.useContext)(u);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},0x215f3d6df:(e,a,t)=>{t.d(a,{D:()=>s});var l=t(0xac309a83),r=t(0xfc89b4a4),n=t(0x156c4e43b);let o={},i=n.g1(n.Ik({name:n.Yj(),console_supported:n.zM(),phone_verification_supported:n.zM(),stripe_address_supported:n.zM(),claudeai_supported:n.zM()})),s=e=>{let{regions:a}=(()=>{let e=(0,l.iW)("supported_regions",o,i);return(0,r.useMemo)(()=>({regions:Object.entries(e).map(e=>{let[a,t]=e;return{code:a,...t}})}),[e])})();return(0,r.useMemo)(()=>({supportedRegions:a.filter(a=>"claude-ai"===e?a.claudeai_supported:"console"===e?a.console_supported:void 0)}),[a,e])}},0x23ed6222b:(e,a,t)=>{t.d(a,{So:()=>i,vv:()=>l,wh:()=>n,xs:()=>r});let l=function(e,a){let{preferWholeNumber:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let l={minimumFractionDigits:2,maximumFractionDigits:2};t&&e/100%1==0&&(l.minimumFractionDigits=0,l.maximumFractionDigits=0);let r=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",n="string"==typeof r?r:r[0];return(["SGD","AUD","NZD"].includes(a)||"USD"===a&&"en-US"!==n)&&(l.currencyDisplay="code"),new Intl.NumberFormat(r||void 0,{style:"currency",currency:a,...l}).format(e/100)};function r(e){let{amount:a,currency:t,preferWholeNumber:r}=e;return l(a,t,{preferWholeNumber:r})}let n={GST:"GST",VAT:"VAT",JCT:"JCT"},o={aud:{showIncluded:!0,taxLabel:n.GST},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:n.VAT},gbp:{showIncluded:!0,taxLabel:n.VAT},nzd:{showIncluded:!0,taxLabel:n.VAT},sgd:{showIncluded:!0,taxLabel:n.GST},usd:{showIncluded:!1,taxLabel:null}};function i(e,a){var t;if("usd"===e.toLowerCase()){if("jp"===a.toLowerCase())return{showIncluded:!1,taxLabel:n.JCT};else if("kr"===a.toLowerCase())return{showIncluded:!0,taxLabel:n.VAT}}return null!=(t=o[e.toLowerCase()])?t:o.usd}}}]);