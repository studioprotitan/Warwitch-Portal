try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d9a01db0-72ca-4bec-8717-26671a3dc1f2",e._sentryDebugIdIdentifier="sentry-dbid-d9a01db0-72ca-4bec-8717-26671a3dc1f2")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33640],{0x1ddbde9f:(e,t,a)=>{a.d(t,{l:()=>l});var n=a(0xb844abc8),s=a(0x16037d0ff);let l=()=>{if((0,n.fJ)())return;let e=document.getElementById(s.I);e&&e.focus()}},0x31075f4f:(e,t,a)=>{a.d(t,{A:()=>n});let n={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}},0x6b95b9a1:(e,t,a)=>{a.d(t,{X:()=>n});function n(e){return"default"===e.type?e.key:e.uuid}},0xec9172c1:(e,t,a)=>{a.d(t,{_:()=>c,x:()=>d});var n=a(0x22102fd88),s=a(0xb804d868),l=a(0x4d348f95),i=a(0xfc89b4a4),r=a(0x151bca12b);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUuid:a}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[a]=(0,s.Vc)("".concat(e,":chatControlsSidebarIsOpen"),t);return a}(a),{isExpanded:c,setIsExpanded:u}=(0,r.VF)(),[f,g]=(0,i.useState)(d),p=(0,i.useRef)({reopenMain:!1}),m=(0,i.useCallback)(e=>{e&&(c&&(p.current.reopenMain=!0),u(!1)),!e&&p.current.reopenMain&&(p.current.reopenMain=!1,u(!0)),g(e)},[c,u,g]),b=(0,i.useMemo)(()=>({isDrawerExpanded:f,setIsDrawerExpanded:m}),[f,m]);return(0,n.jsx)(o.Provider,{value:b,children:t})}},0x115b4e1b8:(e,t,a)=>{a.d(t,{D$:()=>c});var n=a(0x139b5e710),s=a(0x1ab0d1ca1),l=a(0x24b92fff4),i=a(0x31c535e9),r=a(0x3769f4df);let o="advanced",d=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia"];function c(e){let{toggleConversationSetting:t,batchToggleConversationSettings:a}=(0,i.rX)({source:"settingsCoordinator"}),c=(0,i.vP)("compass_mode"),u=(0,r.YW)(),f=(0,l.Gm)(e),{addSuccess:g}=(0,n.Yf)(),p=(0,s.A)(),m=(0,i.vP)("enabled_web_search"),b=(0,i.vP)("enabled_bananagrams"),h=(0,i.vP)("enabled_sourdough"),y=(0,i.vP)("enabled_foccacia"),x=(0,i.vP)("enabled_mcp_tools");return{toggleSearchTool:(e,n)=>{if(n)return void t(e,n);!function(e){let{remainingToolCount:t,compassMode:a}=e;return 0===t&&a===o}({remainingToolCount:function(e){let{toolToIgnore:t,currentStates:a}=e,n=0;for(let e of d)e!==t&&a[e]&&n++;return a.enabled_mcp_tools&&Object.values(a.enabled_mcp_tools).some(e=>!!e)&&n++,n}({toolToIgnore:e,currentStates:{enabled_web_search:null!=m&&m,enabled_bananagrams:null!=b&&b,enabled_sourdough:null!=h&&h,enabled_foccacia:null!=y&&y,enabled_mcp_tools:x}}),compassMode:c})?t(e,n):a({compass_mode:null,[e]:!1})},toggleResearchMode:e=>{var n,s,l;if(!e)return void t("compass_mode",null);(n=f,s=u,l=c,!n&&s&&l!==o)?(a({enabled_web_search:!0,compass_mode:o}),g(p.formatMessage({defaultMessage:"Web search enabled automatically for Research",id:"ss4xBdPHtN"}))):t("compass_mode",o)},canAutoEnableWebSearch:!f&&u,toggleConversationSetting:t,batchToggleConversationSettings:a}}},0x1214e4a54:(e,t,a)=>{a.d(t,{j:()=>u});var n=a(0x22102fd88),s=a(0x139b5e710),l=a(0x22fc8d729),i=a(0x4d348f95),r=a(0xfc89b4a4),o=a(0x1ab0d1ca1),d=a(0x38e6572),c=a(0xbebfc702);let u=()=>{let{moveToProject:e}=(0,c.Zd)(),{addSuccess:t,addError:a}=(0,s.Yf)(),u=(0,o.A)(),f=(0,i.useRouter)();return{moveToProject:(0,r.useCallback)(async function(s,i,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{showSuccess:c=!0,showError:g=!0,enableNavigation:p=!0,onSuccess:m}=o;try{let o=await e(s,i),b=s.length>1;if(o.totalMoved>0&&c)if(b){let e=p?(0,n.jsx)(d.A,{defaultMessage:"{count, plural, one {# chat} other {# chats}} moved to {projectName}",id:"NV3PpRB1tb",values:{count:o.totalMoved,projectName:(0,n.jsx)(l.Y,{onClick:()=>f.push("/project/".concat(i)),className:"-my-2 !px-1 !min-w-0",children:r||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})})}}):u.formatMessage({defaultMessage:"{count, plural, one {# chat} other {# chats}} moved to {projectName}",id:"NV3PpRB1tb"},{count:o.totalMoved,projectName:r||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})});t(e)}else{let e=p?(0,n.jsx)(d.A,{defaultMessage:"Chat moved to {projectName}",id:"t6VGfzHSDj",values:{projectName:(0,n.jsx)(l.Y,{onClick:()=>f.push("/project/".concat(i)),className:"-my-2 !px-1 !min-w-0",children:r||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})})}}):u.formatMessage({defaultMessage:"Chat moved to {projectName}",id:"t6VGfzHSDj"},{projectName:r||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})});t(e)}return o.totalFailed>0&&g&&(b?a(u.formatMessage({defaultMessage:"{count, plural, one {Failed to move # chat. You can try again.} other {Failed to move # chats. You can try again.}}",id:"43D5uv51my"},{count:o.totalFailed}),{messageForLogging:"{count, plural, one {Failed to move # chat. You can try again.} other {Failed to move # chats. You can try again.}}"}):a(u.formatMessage({defaultMessage:"This chat does not exist or was deleted",id:"57wYxTOkNA"}),{messageForLogging:"This chat does not exist or was deleted"})),null==m||m(o),o}catch(e){throw g&&a(u.formatMessage({defaultMessage:"Failed to move chats. You can try again.",id:"icpocvB+Op"}),{error:e,messageForLogging:"Failed to move chats. You can try again."}),e}},[e,t,a,u,f])}}},0x14a42df1b:(e,t,a)=>{a.d(t,{$V:()=>C,Cn:()=>_,U_:()=>k,pi:()=>S});var n=a(0x18312bc5b),s=a(0xf32c56dd),l=a(0x139b5e710),i=a(0x1e61aab5a),r=a(0x1b813d90),o=a(0x253a5c787),d=a(0x1ab0d1ca1),c=a(0x1e841cc7d),u=a(0xbebfc702),f=a(0x1334f6ecc),g=a(0xe0c26d90),p=a(0x9cb4c2a2),m=a(0x1c12b3087),b=a(0x1fb2770f2),h=a(0x204a5f1d2),y=a(0x6b95b9a1),x=a(0x1e48e639d),v=a(0x1214e4a54);let _=e=>{let{setMcpDirectoryModalIsOpen:t,setStyleModalOpenWithScreen:a,setCreateProjectModalIsOpen:n,setGithubModalIsOpen:s,setGmailAuthModalIsOpen:l,setCreatePromptArgumentModalIsOpen:r}=e,o=w(),d=S(),c=C(),{openFeaturePreviewModal:u}=(0,h.go)(),{checkIsGithubAuthenticated:p,initGithubAuth:m}=(0,g.nB)(),{initDriveAuth:b}=(0,f.cI)();return{onAddScreenshot:()=>{o()},openGithubModal:()=>{p().then(e=>{if(!e)return void m();s(!0)})},openGmailAuthModal:()=>{l(!0)},openMcpDirectoryModal:()=>{t(!0)},initDriveAuth:b,createDriveSyncSource:M(),onStyleChange:e=>{d(e)},openStyleModal:()=>{a(i.I.LIST)},onSelectProject:(e,t)=>{c(e,t)},onCreateProject:e=>{n({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:u,onEnterPromptArguments:(e,t)=>{r({isOpen:!0,serverUuid:e,prompt:t})}}},M=()=>{let{addError:e}=(0,l.Yf)(),{setSyncSourceUuids:t}=(0,m.Jy)(e=>({setSyncSourceUuids:e.setSyncSourceUuids})),{setIsUploadingDriveSync:a}=(0,p.oM)(),{mutate:n}=(0,c.EF)({onMutate:()=>{a(!0)},onSuccess:e=>{a(!1),t(t=>[...t,e.uuid])},onError:t=>{a(!1),e((0,x.J)(t),{error:t,errorContext:{tags:{source:"chat_input_drive_sync_create"}}})},meta:{noToast:!0}});return e=>n({sync_source_type:r.v8.GDRIVE,sync_source_config:{uri:e}})},k=e=>{var t;null==(t=document.getElementById("chat-input-file-upload-".concat(e)))||t.click()},C=()=>{let e=(0,m.QN)(),{setProjectUuid:t,conversation:a}=(0,p.oM)(),{moveToProject:n}=(0,v.j)(),{removeFromProject:s}=(0,u.nl)();return async(l,i)=>{e===l?(null==a?void 0:a.id)?await s([a.id],{showSuccess:!1}):t(void 0):(null==a?void 0:a.id)&&l?await n([a.id],l,i,{enableNavigation:!0}):t(l)}},w=()=>{let{addError:e}=(0,l.Yf)(),t=(0,d.A)(),{handleUpload:a}=(0,p.oM)(),i=(0,s.st)();return async()=>{i.track({event_key:"claudeai.plus_menu.screenshot_clicked"});let s=null;try{s=await (0,n.N)({width:1568,height:1568})}catch(a){(0,o.Cp)(a),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}),{error:a,messageForLogging:"Could not capture screen"})}if(!s)return;let l=new File([await fetch(s.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await a([l])}},S=()=>{let{setPersonalizedStyle:e}=(0,p.oM)(),t=(0,s.st)(),{personalizedStyleOptions:a,setStoredStyle:n}=(0,b.p)();return s=>{let l=a.find(e=>e.key===s);if(!l)return;e(l);let i=(0,y.X)(l);n({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}}},0x16037d0ff:(e,t,a)=>{a.d(t,{I:()=>n});let n="chat-input-menu-search-input"},0x16801a2b9:(e,t,a)=>{a.d(t,{u:()=>u,i:()=>f});var n=a(0x22102fd88),s=a(0x286b4261),l=a.n(s),i=a(0xfc89b4a4);function r(e,t){switch(t.type){case"OPEN_COMPASS_STATUS":return{...e,selectedItem:{type:"compass",data:t.data}};case"SELECT_ATTACHMENT":return{...e,selectedItem:{type:"attachment",attachment:t.attachment}};case"SELECT_ARTIFACT":return{...e,selectedItem:{type:"artifact",id:t.id,versionUuid:t.versionUuid}};case"SELECT_DOC":return{...e,selectedItem:{type:"doc",id:t.id}};case"SELECT_FILE":return{...e,selectedItem:{type:"file",path:t.path,toolType:t.toolType,messageId:t.messageId}};case"SELECT_MCP_SERVER":return{...e,selectedItem:{type:"mcp_server",serverUuid:t.serverUuid,serverName:t.serverName,iconType:t.iconType,iconSrc:t.iconSrc}};case"SELECT_WEB_SEARCH":return{...e,selectedItem:{type:"web_search"}};case"CLEAR_SELECTED":return{...e,selectedItem:null,activeMessageUuid:void 0};case"SET_ACTIVE_MESSAGE_UUID":return{...e,activeMessageUuid:t.uuid};case"UPDATE_ATTACHMENTS":return{...e,attachments:t.attachments};case"UPDATE_FILES":return{...e,files:t.files};case"UPDATE_SYNC_SOURCES":return{...e,syncSources:t.syncSources};case"UPDATE_STREAMING_FILE":{var a,n;let s=new Map(e.streamingFiles),l=s.get(t.path);return s.set(t.path,{content:t.content,renderAs:t.renderAs,showingInRightPane:null!=(n=null!=(a=t.showingInRightPane)?a:null==l?void 0:l.showingInRightPane)&&n}),{...e,streamingFiles:s}}case"CLEAR_STREAMING_FILE":{let a=new Map(e.streamingFiles);return a.delete(t.path),{...e,streamingFiles:a}}default:return e}}let o={selectedItem:null,attachments:[],files:[],syncSources:[],activeMessageUuid:void 0,conversationUuid:void 0,streamingFiles:new Map},d={chatResourceState:o,dispatchChatResource:l()},c=(0,i.createContext)(d);function u(e){let{children:t,conversationUuid:a}=e,[s,l]=(0,i.useReducer)(r,{...o,conversationUuid:a}),d=(0,i.useMemo)(()=>({chatResourceState:s,dispatchChatResource:l}),[s,l]);return(0,n.jsx)(c.Provider,{value:d,children:t})}function f(){return(0,i.useContext)(c)}},0x17774dcd8:(e,t,a)=>{a.d(t,{Hd:()=>f,Ob:()=>g,gB:()=>u,lS:()=>m,nb:()=>p});var n=a(0x14de19ae8),s=a(0x78b33fbd),l=a(0xbdad302d),i=a(0x3769f4df),r=a(0x9cb4c2a2),o=a(0x1611828d),d=a(0xe824fb1c),c=a(0x1f22b8dda);let u=()=>{let e=(0,n.h0)(),t=(0,i.be)(),a=(0,d.Uz)().length>0,s=m();return!e&&!t&&a&&!s},f=()=>{let e=(0,n.h0)(),t=(0,d.Uz)().length>0;return e||t},g=()=>{let e=(0,n.h0)(),t=(0,s.useLayer)("trials_freemium");return!e&&t.get("show_upgrade_buttons",!1)};function p(){let{conversation:e}=(0,r.oM)(),t=(0,c.Zx)(null==e?void 0:e.id);return!!(null==e?void 0:e.sessionId)||t}function m(){var e;let t=(0,l.QJ)(),{conversation:a}=(0,r.oM)(),n=(0,o.mL)(),s=(0,o.PF)(),i=(0,c.Zx)(null==a?void 0:a.id);return!!(t&&(i||(null==a||null==(e=a.conversationSettings)?void 0:e.enabled_yukon_gold)||n||s))}},0x17b66474f:(e,t,a)=>{a.d(t,{Xx:()=>U,_9:()=>F,CH:()=>z,tl:()=>Y});var n=a(0x22102fd88),s=a(0xf32c56dd),l=a(0x286b4261),i=a.n(l),r=a(0xfc89b4a4),o=a(0x2174968e5),d=a(0x19c88845),c=a(0x1d0c32e96),u=a(0xb844abc8),f=a(0x1b813d90),g=a(0x17f3a2521),p=a(0x1bd175d8c),m=a(0x4d348f95),b=a(0x1ab0d1ca1),h=a(0x1d302b010),y=a(0xbebfc702),x=a(0x1334f6ecc),v=a(0xe0c26d90),_=a(0x18175ce17),M=a(0xd5e0c33c),k=a(0x1c12b3087),C=a(0x1037073d3),w=a(0xe824fb1c),S=a(0x17774dcd8),j=a(0x14a42df1b),A=a(0x1ddbde9f),E=a(0xa7346e51),I=a(0x2230d6f61),D=a(0x733b8fe2),T=a.n(D);let P={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},G={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:i(),inputMenuIsOpen:!1,setInputMenuIsOpen:i(),menuView:{rootItems:[],currentItems:[]},handleClickItem:i(),handleBack:i(),highlightedItemKey:null,setHighlightedItemKey:i(),animationDirection:"none"},O={...G,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:i(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:i(),githubModalIsOpen:!1,setGithubModalIsOpen:i(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:i(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:i()},R={...G,mcpDirectoryModalIsOpen:!1,setMcpDirectoryModalIsOpen:i()},N=(0,r.createContext)(O),L=(0,r.createContext)(R),F=e=>{let{actions:t,rootItems:a,menuType:l,inputMenuIsOpen:i,setInputMenuIsOpen:o}=e,u=(0,s.st)(),g=(0,r.useRef)(null),[p,m]=(0,r.useState)(null),[h,v]=(0,r.useState)(null),[_,k]=(0,r.useState)(""),C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i&&e){o(!0),"plus"===l&&u.track({event_key:"claudeai.plus_menu.opened"});return}if(i&&!e){k("");let e=()=>{var e;w(null,!0),v(null),o(!1),null==(e=document.getElementById("input-".concat(l,"-menu-trigger")))||e.focus()};t.withDelay?setTimeout(e,200):e()}},w=(e,t)=>{t?g.current=e:g.current=p,m(e)},S=(()=>{if(p){let e=a.find(e=>e.key===p);if(e&&"children"in e)return e.children}return a})(),j=(e=>{let{actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:s,pathItems:l,path:i,menuType:o}=e,u=(0,b.A)(),g=(0,r.useRef)(a),{handleSearchDrive:p,searchedDriveItems:m}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:s,inputMenuIsOpen:l,menuType:i}=e,o="drive",d=(t===o||!t)&&l&&"plus"===i,u=(0,x.LP)(),[g,p]=(0,r.useState)([]),{recentDriveDocs:m}=(0,x.zH)(d),b=(0,r.useMemo)(()=>new I.A(m,{...P,keys:["title"]}),[m]);return u&&d?{handleSearchDrive:()=>{let e=s.toLowerCase();if(!e||!m)return[];p(b.search(e,{limit:t===o?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,n.jsx)(c.A9,{type:f.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{a.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:g}:{handleSearchDrive:()=>[],searchedDriveItems:[]}})({path:i,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:s,menuType:o}),{handleSearchProjects:h,searchedProjectItems:v}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:s,inputMenuIsOpen:l,menuType:i,pathItems:o}=e,c="projects",u=(0,M.K)(),f=o.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t,g=!!(s&&f&&(t===c||!t)&&l&&u&&"plus"===i),[p,m]=(0,r.useState)([]),{data:b}=(0,y.CB)({enabled:g,limit:y.dx}),h=(0,r.useMemo)(()=>new I.A(b||[],{...P,keys:["name","description"]}),[b]);return g?{handleSearchProjects:()=>{let e=s.toLowerCase();if(!e||!b)return[];m(h.search(e,{limit:t===c?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,n.jsx)(d.Projects,{size:16}),subtitle:e.item.creator.full_name,onClick:()=>a.onSelectProject(e.item.uuid)})))},searchedProjectItems:p}:{handleSearchProjects:()=>[],searchedProjectItems:[]}})({path:i,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:s,menuType:o,pathItems:l}),{handleFilterMenuItems:_,filteredMenuItems:k}=(e=>{let{path:t,inputMenuSearchQuery:a,pathItems:n}=e,s=n.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,i]=(0,r.useState)([]);return"projects"===t||"drive"===t?{handleFilterMenuItems:()=>[],filteredMenuItems:[]}:{handleFilterMenuItems:()=>{let e=a.toLowerCase();if(!e)return s;let t=[];for(let e of s)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}})({path:i,inputMenuSearchQuery:a,pathItems:l}),C=(0,r.useCallback)(()=>{_(),h(),p()},[_,h,p]),w=(0,r.useMemo)(()=>T()(()=>{C()},100),[C]);return((0,r.useEffect)(()=>{if(a&&s&&a!==g.current)return g.current=a,w(),()=>{w.cancel()}},[s,a,w]),k.length||v.length||m.length)?[k,v,m].reduce((e,t,a)=>[...e,...e.length&&t.length?[{key:"divider".concat(a+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:u.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,n.jsx)(E.e,{size:16}),onClick:()=>void 0,isDisabled:!0}]})({actions:t,inputMenuSearchQuery:_,inputMenuIsOpen:i,pathItems:S,path:p,menuType:l}),D=_.trim().length?j:S,{handleClickItem:G,handleBack:O}=(e=>{let{currentItems:t,inputMenuIsOpen:a,setInputMenuIsOpen:n,inputMenuSearchQuery:s,setInputMenuSearchQuery:l,path:i,handleUpdatePath:o,highlightedItemKey:d,setHighlightedItemKey:c}=e,u=(0,r.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)n(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null==(t=e.onClick)||t.call(e)}},[n,o]),f=(0,r.useCallback)(e=>{i&&(null==e||e.preventDefault(),o(null),c(i),(0,A.l)())},[i,c,o]),g=(0,r.useCallback)(e=>{let a,n=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),s=n.findIndex(e=>{let{key:t}=e;return t===d});a="ArrowUp"===e?s>0?s-1:n.length-1:s<n.length-1?s+1:0,c(n[a].key)},[t,d,c]),p=(0,r.useCallback)(e=>{var t,s,i;if(!a)return void u(e);if(!e.isDisabled){if(l(""),"back"===e.type)return void f();if("button"===e.type){null==(t=e.onClick)||t.call(e),e.skipCloseOnClick||n(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),c(null),(0,A.l)();return}"option"===e.type&&(null==(s=e.onClick)||s.call(e),e.skipCloseOnClick||n(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null==(i=e.onClick)||i.call(e),(0,A.l)())}},[f,u,o,a,l,n,c]),m=(0,r.useCallback)((e,a)=>{if(!d)return;let n=t.find(e=>{let{key:t}=e;return t===d});n&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(n.type))&&(a.preventDefault(),p(n))},[d,t,p]);return(0,r.useEffect)(()=>{if(!a)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),n(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),g(e.key)):"ArrowRight"===e.key||"Enter"===e.key?m(e.key,e):"ArrowLeft"!==e.key||s||f(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,n,s,g,m,f]),{handleClickItem:p,handleBack:f}})({currentItems:D,inputMenuIsOpen:i,setInputMenuIsOpen:C,inputMenuSearchQuery:_,setInputMenuSearchQuery:k,path:p,handleUpdatePath:w,highlightedItemKey:h,setHighlightedItemKey:v}),R=g.current&&!p?"back":!g.current&&p?"forward":"none";return{path:p,inputMenuSearchQuery:_,setInputMenuSearchQuery:k,inputMenuIsOpen:i,setInputMenuIsOpen:C,menuView:{rootItems:a,currentItems:D},handleClickItem:G,handleBack:O,highlightedItemKey:h,setHighlightedItemKey:v,animationDirection:R}};function U(e){let{placement:t,sessionMcpServers:a,children:s}=e,[l,i]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),[I,D]=(0,r.useState)(null),[T,P]=(0,r.useState)(!1),[G,O]=(0,r.useState)(!1),[R,U]=(0,r.useState)(!1),[z,Y]=(0,r.useState)(null),[H,V]=(0,r.useState)(null),J=(0,j.Cn)({setMcpDirectoryModalIsOpen:U,setStyleModalOpenWithScreen:Y,setCreateProjectModalIsOpen:D,setGithubModalIsOpen:P,setGmailAuthModalIsOpen:O,setCreatePromptArgumentModalIsOpen:V}),W=(e=>{let{placement:t,actions:a,inputMenuIsOpen:s}=e,l=(0,b.A)(),i=(e=>{let{actions:t}=e,a=(0,b.A)();return(0,p.V)()||(0,u.fJ)()?null:{key:g.xd.ADD_SCREENSHOT,type:"button",icon:(0,n.jsx)(d.Camera,{size:16}),label:a.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}})({actions:a}),r=(0,_.kO)(),o=(e=>{let{actions:t}=e,a=(0,b.A)();return(0,v.Cq)()?{key:g.xd.GITHUB,type:"button",icon:(0,n.jsx)(c.A9,{type:f.v8.GITHUB,size:16}),label:a.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null})({actions:a}),A=(e=>{let{actions:t,inputMenuIsOpen:a}=e,s=(0,b.A)(),l=(0,S.Hd)(),i=(0,x.LP)(),{isDriveAuthenticated:r,initDriveAuth:o}=(0,x.cI)(),{recentDriveDocs:d,isLoading:u}=(0,x.zH)(a);if(!i)return null;let p=s.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),m={key:g.xd.DRIVE,icon:(0,n.jsx)(c.A9,{type:f.v8.GDRIVE,size:16}),label:p};if(!r)return{...m,type:"button",isExternal:!0,secondaryText:s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:o};let h=u?[{key:"drive-loading",type:"button",label:s.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:d.length?d.slice(0,8).map(e=>{var a;return{key:e.uri,type:"button",label:null!=(a=e.title)?a:"Untitled",icon:(0,n.jsx)(c.A9,{type:f.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:s.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...m,type:"buttonGroup",children:[...l?[]:[{type:"back",key:"drive-back",label:p}],...h]}})({actions:a,inputMenuIsOpen:s}),E=(e=>{let{inputMenuIsOpen:t,actions:a}=e,s=(0,b.A)(),l=(0,S.Hd)(),i=(0,k.QN)(),{isProjectLocked:r}=(0,k.Jy)(e=>({isProjectLocked:e.isProjectLocked})),o=(0,M.K)(),c=(0,m.usePathname)(),u="string"==typeof c&&c.startsWith("/project/"),{data:f}=(0,y.CB)({enabled:t&&o,creatorFilter:"is_creator",limit:8}),{data:p}=(0,y.CB)({enabled:t&&o,creatorFilter:"is_not_creator",limit:8}),h=[...f||[],...p||[]],{data:x}=(0,y.fo)(i),v=(null==h?void 0:h.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,subtitle:e.creator.full_name,onClick:()=>a.onSelectProject(e.uuid,e.name),icon:(0,n.jsx)(d.Projects,{size:16}),isChecked:e.uuid===i})))||[];if(r||!o||u)return null;let _=s.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:g.xd.PROJECTS,type:"optionGroup",icon:(0,n.jsx)(d.Projects,{size:16}),label:_,secondaryText:null==x?void 0:x.name,children:[...l?[]:[{type:"back",key:"projects-back",label:_}],...v,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,n.jsx)(d.Add,{size:16}),label:s.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>a.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!x}})({actions:a,inputMenuIsOpen:s}),I=(e=>{let{actions:t}=e,a=(0,b.A)(),s=(0,w.Uz)({isConnected:!0,hasPromptsOrResources:!0}),l=(0,h.R4)(),i=(0,h.vW)();return s.map(e=>{let s=e.prompts.map(a=>({key:"prompt-".concat(e.name,"-").concat(a.name),type:"button",icon:(0,n.jsx)(d.Chat,{size:16}),label:a.displayName,onClick:()=>{var n;return(null==(n=a.arguments)?void 0:n.length)?t.onEnterPromptArguments(e.uuid,a):void i({serverUuid:e.uuid,prompt:a,args:{}})}})),r=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,n.jsx)(d.File,{size:16}),label:t.displayName,onClick:()=>void l({serverUuid:e.uuid,resource:t})}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:a.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,n.jsx)(C.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name}),children:[...s,...r]}})})({actions:a});return[{key:g.xd.UPLOAD,type:"button",icon:(0,n.jsx)(d.Attachment,{size:16}),label:l.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:()=>(0,j.U_)(t)},...i?[i]:[],...o?[o]:[],...A&&!r?[A]:[],...I,...E?[{key:"divider1",type:"divider",label:""},E]:[]]})({placement:t,actions:J,inputMenuIsOpen:l}),Z=F({actions:J,rootItems:W,menuType:"plus",inputMenuIsOpen:l,setInputMenuIsOpen:i}),K=(0,o.ey)({actions:J,sessionMcpServers:a}),B=F({actions:J,rootItems:K,menuType:"tools",inputMenuIsOpen:A,setInputMenuIsOpen:E}),X=(0,r.useMemo)(()=>({...Z,styleModalOpenWithScreen:z,setStyleModalOpenWithScreen:Y,createProjectModalIsOpen:I,setCreateProjectModalIsOpen:D,githubModalIsOpen:T,setGithubModalIsOpen:P,gmailAuthModalIsOpen:G,setGmailAuthModalIsOpen:O,createPromptArgumentModalIsOpen:H,setCreatePromptArgumentModalIsOpen:V}),[Z,z,Y,I,D,T,P,G,O,H,V]),q=(0,r.useMemo)(()=>({...B,mcpDirectoryModalIsOpen:R,setMcpDirectoryModalIsOpen:U}),[B,R,U]);return(0,n.jsx)(N.Provider,{value:X,children:(0,n.jsx)(L.Provider,{value:q,children:s})})}function z(){return(0,r.useContext)(N)}function Y(){return(0,r.useContext)(L)}},0x17ced59d0:(e,t,a)=>{a.d(t,{s:()=>c});var n=a(0x22102fd88),s=a(0x19c88845),l=a(0xb844abc8),i=a(0x17f3a2521),r=a(0x1a1f6dda6),o=a(0x1ab0d1ca1),d=a(0x16037d0ff);let c=e=>{let{path:t,inputMenuSearchQuery:a,setInputMenuSearchQuery:c,handleBack:u,className:f}=e,g=(0,o.A)(),p=(0,l.fJ)(),m={[i.xd.DRIVE]:g.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[i.xd.PROJECTS]:g.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[i.xd.STYLES]:g.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},b=t&&t in m?m[t]:g.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),h=null===t||!!a.trim().length;return(0,n.jsxs)("div",{className:(0,r.A)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",f),children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,n.jsx)(s.Search,{className:(0,r.A)("text-text-500/50 transition-opacity",h?"opacity-100":"opacity-0")})}),(0,n.jsx)("button",{onClick:u,className:(0,r.A)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",h?"opacity-0":"opacity-100"),disabled:h,children:(0,n.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,n.jsx)(s.ArrowLeft,{})})})]}),(0,n.jsx)("input",{autoFocus:!p,id:d.I,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 font-base text-text-300 w-full",placeholder:b,value:a,onChange:e=>c(e.target.value)})]})}},0x18312bc5b:(e,t,a)=>{a.d(t,{N:()=>n});async function n(e){let t,a="CaptureController"in window?new CaptureController:null;null==a||a.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:a})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let n=document.createElement("video");n.srcObject=t,await new Promise((e,t)=>{n.onloadedmetadata=()=>{n.play().then(e,t)}});let s=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(n.videoWidth,e.width),e.height/Math.min(n.videoHeight,e.height));s.width=n.videoWidth*t,s.height=n.videoHeight*t}else s.width=n.videoWidth,s.height=n.videoHeight;let l=s.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(n,0,0,s.width,s.height);let i=s.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}},0x1e61aab5a:(e,t,a)=>{a.d(t,{I:()=>n});var n=function(e){return e.CREATE="create",e.CREATE_MANUALLY="create_manually",e.LIST="list",e.EDIT="edit",e}({})},0x1f4bc48d7:(e,t,a)=>{a.d(t,{EY:()=>i});var n=a(0x12c9046cd),s=a(0x14de19ae8),l=a(0x78b33fbd);let i=()=>{let{data:e,...t}=(()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,a=(0,s.h0)(),i=(0,l.useLayer)("trials_freemium"),r=!a&&i.get("free_thinking",!1)&&!!t;return(0,n.Sk)("/api/organizations/".concat(t,"/feature_limits"),{queryKey:["FEATURE_LIMITS",t],enabled:r,staleTime:3e5})})(),a=null==e?void 0:e.limits.find(e=>"thinking"===e.feature);return{...t,data:a}}},0x204a5f1d2:(e,t,a)=>{a.d(t,{TW:()=>D,go:()=>I,wU:()=>E});var n=a(0x22102fd88),s=a(0x17aa9d8d7),l=a(0x1e3604791),i=a(0x1065e6d73),r=a(0xf32c56dd),o=a(0x14de19ae8),d=a(0x139b5e710),c=a(0x2471dc42f),u=a(0x252daebb2),f=a(0x183548b63),g=a(0x491d2ca),p=a(0x22fc8d729),m=a(0x1b370f49d),b=a(0xac309a83),h=a(0x286b4261),y=a.n(h),x=a(0xcaa21d58),v=a(0xfc89b4a4),_=a(0x38e6572),M=a(0x1ab0d1ca1),k=a(0x156c4e43b),C=a(0x20f483da3);let w=k.Ik({title:k.Yj(),description:k.Yj(),shortDescription:k.Yj().optional(),titleKey:k.Yj().optional(),descriptionKey:k.Yj().optional(),shortDescriptionKey:k.Yj().optional()}),S=k.Ik({preview_feature_uses_artifacts:w.optional(),preview_feature_uses_latex:w.optional(),preview_feature_uses_citations:w.optional(),enabled_artifacts_attachments:w.optional(),enabled_turmeric:w.optional(),enabled_gdrive:w.optional(),enabled_bananagrams:w.optional(),enabled_web_search:w.optional(),enabled_sourdough:w.optional(),enabled_foccacia:w.optional()}),j={},A=(0,v.createContext)({openFeaturePreviewModal:y()}),E=e=>{let{children:t}=e,[a,s]=(0,v.useState)(!1);return(0,n.jsxs)(A.Provider,{value:{openFeaturePreviewModal:()=>s(!0)},children:[t,(0,n.jsx)(f.aF,{modalSize:"xl",isOpen:a,onClose:()=>s(!1),hasCloseButton:!0,title:(0,n.jsx)(_.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,n.jsx)(D,{})})]})},I=()=>(0,v.useContext)(A);function D(e){let{includeTitle:t}=e,a=function(){let e=(0,b.T9)("fp_menu","features",j,S),t=(0,b.fS)("claudeai_analysis_tool_allowed"),{value:a,source:n}=(0,l.N)({}),s=(0,i.Gh)(),r=(0,b.fS)("wiggle_graduated"),{preview_feature_uses_artifacts:o,enabled_artifacts_attachments:d,preview_feature_uses_latex:c,enabled_turmeric:u,...f}=e,g={...f};return t&&!(a&&"experiment"===n&&o)&&(g.enabled_artifacts_attachments=d),s&&!r&&(g.enabled_monkeys_in_a_barrel={title:"Code execution and file creation",description:"Claude can execute code and create and edit docs, spreadsheets, presentations, PDFs, and data reports."}),g}(),r=Object.keys(a).length>0,{account:d}=(0,o.YL)(),{mutate:c}=(0,s.yJ)(),u=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{if(!(null==d?void 0:d.settings)||u.current)return;u.current=!0;let e=d.settings.enabled_monkeys_in_a_barrel,t=d.settings.preview_feature_uses_artifacts,a=d.settings.enabled_artifacts_attachments;e&&!t&&c({preview_feature_uses_artifacts:!0}),e&&a&&c({enabled_artifacts_attachments:!1})},[null==d?void 0:d.settings,c]),!r)return;let f=(0,n.jsx)(n.Fragment,{children:Object.entries(a).map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[t>0&&(0,n.jsx)("div",{className:"border-t border-border-300"}),(0,n.jsx)(T,{label:a,...s})]},a)})});return t?(0,n.jsxs)(g.XY,{children:[(0,n.jsxs)(g.Kv,{children:[(0,n.jsx)(g.Rx,{children:(0,n.jsx)(_.A,{defaultMessage:"Experimental",id:"GOx7x4mbZd"})}),(0,n.jsx)(g.Xe,{id:"feature-preview",children:(0,n.jsx)(_.A,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claudeâ€™s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})})]}),f]}):f}function T(e){var t;let{label:a,...l}=e,f=(0,M.A)(),{track:h}=(0,r.st)(),{addSuccess:y}=(0,d.Yf)(),{account:k}=(0,o.YL)(),{mutate:w,isPending:S}=(0,s.yJ)(),{checked:j}=P(a),A=(0,i.t5)(),E="enabled_monkeys_in_a_barrel"===a&&!A,I=(0,o.mV)(),D=(0,b.fS)("claudeai_wiggle_egress_settings"),T=(0,i.ut)(),O=(0,i.UA)(),R=(0,i.EG)(),N=(0,v.useCallback)(()=>{if(!k||E)return;h({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:k.uuid,feature_id:a,action:!0===j?"disable":"enable"});let e=!j;if(y(f.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:j?"disabled":"enabled"})),e){var t,n,s;if("enabled_monkeys_in_a_barrel"===a){let e=null==(t=k.settings)?void 0:t.enabled_artifacts_attachments,a=[];e&&a.push("Analysis Tool"),a.length>0&&y(f.formatMessage({defaultMessage:"Automatically disabled: {features}",id:"7StJBCedWA"},{features:a.join(", ")})),(null==(n=k.settings)?void 0:n.preview_feature_uses_artifacts)||y(f.formatMessage({defaultMessage:"Automatically enabled: Artifacts",id:"v5zt5SRUyk"}))}else"enabled_artifacts_attachments"===a&&(null==(s=k.settings)?void 0:s.enabled_monkeys_in_a_barrel)&&y(f.formatMessage({defaultMessage:"Automatically disabled: Files feature",id:"8T9PGQkYRT"}))}w({[a]:e,..."enabled_monkeys_in_a_barrel"===a&&e&&{enabled_artifacts_attachments:!1,preview_feature_uses_artifacts:!0},..."enabled_artifacts_attachments"===a&&e&&{enabled_monkeys_in_a_barrel:!1}})},[k,h,a,j,y,f,l.title,w,E]);return(0,n.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,n.jsx)(g.ic,{image:(0,n.jsx)(x.default,{src:"/images/feature-preview/square/".concat(null!=(t=G[a])?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:f.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),primaryText:(0,n.jsx)("span",{id:"feature-".concat(a,"-title"),children:l.titleKey?(0,n.jsx)(u.X5,{id:l.titleKey}):l.title}),secondaryText:(0,n.jsxs)(n.Fragment,{children:[l.descriptionKey?(0,n.jsx)(u.X5,{id:l.descriptionKey}):l.description,"enabled_monkeys_in_a_barrel"===a&&!D&&(0,n.jsx)("span",{className:"text-xs text-text-500",children:(0,n.jsx)(_.A,{defaultMessage:"This feature gives Claude network access to create and analyze files, which has <a>security risks</a>. Monitor chats closely when using this feature.",id:"2tm+lICYTm",values:{a:e=>(0,n.jsx)(p.Y,{href:"https://support.claude.com/en/articles/12111783-create-and-edit-files-with-claude#h_0ee9d698a1",target:"_blank",children:e})}})})]}),action:(0,n.jsx)("label",{className:"cursor-pointer mt-2",children:(0,n.jsx)(m.m,{tooltipContent:E?(0,n.jsx)(_.A,{defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"}):"enabled_monkeys_in_a_barrel"===a?(0,n.jsx)(_.A,{defaultMessage:"This is an upgrade to the analysis tool. It does not support versioning or remixing of Artifacts.",id:"OT4Z/tnKXZ"}):null,children:(0,n.jsx)("div",{children:(0,n.jsx)(c.j,{checked:!!j,onChange:N,"aria-labelledby":"feature-".concat(a,"-title"),disabled:E},a)})})})}),"enabled_monkeys_in_a_barrel"===a&&j&&!I&&D&&(0,n.jsx)(C.wi,{enabled:T,allowedHosts:O,hostsTemplate:R,onUpdate:w,isPending:S})]})}let P=e=>{var t,a,n,s,r,d,c;let{account:u}=(0,o.YL)(),{value:f,source:g}=(0,l.N)(null!=(s=null==u?void 0:u.settings)?s:{}),p=(0,i.u9)(),m=null!=(r=null==u||null==(t=u.settings)?void 0:t.preview_feature_uses_artifacts)&&r,b="flag"===g&&f||null!=(d=null==u||null==(a=u.settings)?void 0:a.enabled_artifacts_attachments)&&d;return"enabled_monkeys_in_a_barrel"===e?{checked:null!=p&&p}:"enabled_artifacts_attachments"===e?{checked:b}:"preview_feature_uses_artifacts"===e?{checked:m}:{checked:null!=(c=null==u||null==(n=u.settings)?void 0:n[e])&&c}},G={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",enabled_artifacts_attachments:"analyse",enabled_turmeric:"turmeric",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough",enabled_monkeys_in_a_barrel:"wiggle"}},0x2174968e5:(e,t,a)=>{a.d(t,{$3:()=>Q,ey:()=>U});var n=a(0x22102fd88),s=a(0x226530adf),l=a(0x14a6d5f1),i=a(0x14de19ae8),r=a(0x252daebb2),o=a(0x19c88845),d=a(0x1d0c32e96),c=a(0xac309a83),u=a(0x1b813d90),f=a(0x17f3a2521),g=a(0x88148a10),p=a(0x78b33fbd),m=a(0x4d348f95),b=a(0xfc89b4a4),h=a(0x1ab0d1ca1),y=a(0x1f4bc48d7),x=a(0x1d302b010),v=a(0x24b92fff4),_=a(0x1334f6ecc),M=a(0xdf883ab6),k=a(0x25062734b),C=a(0x4d9fc74e),w=a(0x31c535e9),S=a(0x18175ce17),j=a(0x3769f4df),A=a(0x9cb4c2a2),E=a(0x1fb2770f2),I=a(0x1037073d3),D=a(0x115b4e1b8),T=a(0xe824fb1c),P=a(0x80c59a8d),G=a(0x1dafb1ccf),O=a(0x239a8e4b4),R=a(0x17774dcd8);let N="inputMenu",L={},F=()=>({isDisabled:!0,tooltip:(0,h.A)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),U=e=>{let{actions:t,sessionMcpServers:a}=e,l=(0,h.A)(),r=(0,x.lu)(),d=(0,i.O9)(),c=(0,i.zc)(),u=(0,i.h0)(),f=(0,k.sb)(),p=(0,R.Ob)(),{conversation:b,model:y}=(0,A.oM)(),v=(0,s.Z3)((null==b?void 0:b.id)||null),_=null!=y?y:v,M=(0,m.useRouter)(),C=z({actions:t,currentModel:_}),w=q({sessionMcpServers:a}),S=W({actions:t}),j=Z({actions:t}),E=K({currentModel:_,conversation:b}),I=B({currentModel:_,conversation:b}),D=(0,R.gB)(),T=(0,R.lS)();if(D)return S;let P=[...j&&!T?[j]:[],...E&&!T?[E]:[],...I?[I]:[]];C.length&&!T&&(P=P.concat([...P.length?[{key:"divider1",type:"divider",label:""}]:[],...C]));let G=r&&(d||c);return(w.length||G||f)&&(P=P.concat([...w,...f?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,n.jsx)(g.c,{size:16}),label:l.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),tag:u?void 0:p?"upgrade":"pro",onClick:u||!p?t.openMcpDirectoryModal:()=>{window.location.href="/upgrade"}},{key:"manageIntegrations",type:"button",icon:(0,n.jsx)(o.Settings,{size:16}),label:l.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),onClick:()=>{M.push("/settings/connectors")}}]:G?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,n.jsx)(g.c,{size:16}),label:l.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),isExternal:!0,onClick:()=>{M.push("/settings/connectors")}}]:[]])),P},z=e=>{let{actions:t,currentModel:a}=e,n=Y({currentModel:a}),s=H({currentModel:a}),l=J({actions:t,currentModel:a}),i=V({currentModel:a});return[...n?[n]:[],...s?[s]:[],...l?[l]:[],...i?[i]:[]]},Y=e=>{let{currentModel:t}=e,a=(0,h.A)(),{conversation:s}=(0,A.oM)(),l=(0,i.h0)(),r=(0,R.Ob)(),d=(0,j.Eu)(t),c=(0,j.be)(),u=(0,j.WJ)(),f=(0,j.fy)(s),{toggleSearchTool:g}=(0,D.D$)(s),p=F(),m=$("web_search");if(!c&&!r)return null;let b=f&&d;return c||!r||l?{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,n.jsx)(o.Globe,{size:16}),isChecked:b,onClick:()=>g("enabled_web_search",!b),tag:m,...!u?{isDisabled:!0,tooltip:a.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}:!d?p:null}:{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,n.jsx)(o.Globe,{size:16}),isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},H=e=>{let{currentModel:t}=e,a=(0,h.A)(),{conversation:s}=(0,A.oM)(),r=(0,i.h0)(),o=(0,R.Ob)(),{toggleSearchTool:c,toggleConversationSetting:f}=(0,D.D$)(s),g=(0,_.K6)(),p=(0,l.Wq)()(t,"gsuite_tools"),m=(0,_.$f)(s),{isDriveAuthenticated:b,initDriveAuth:y}=(0,_.cI)({callerIdentifier:N,handleAuthSuccess:()=>{f("enabled_bananagrams",!0)}}),x=(0,S.kO)(),v=(0,S.dJ)(u.v8.GDRIVE),{startAuth:M,authBreakdown:k}=(0,S.ob)(u.v8.GDRIVE,{callerIdentifier:N,handleAuthSuccess:()=>{f("enabled_foccacia",!0)}}),C=F(),w=$("drive_search");if(x&&v&&b||x&&!v||v&&!k.firstParty||!g&&!o)return null;let j={key:"driveSearch",icon:(0,n.jsx)(d.ft,{size:16}),label:a.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!g&&o&&!r)return{...j,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!b){let e=a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),t=a.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...j,type:"button",isExternal:!0,secondaryText:x?t:e,onClick:()=>{y()},...x?{tooltip:a.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...p?null:C}}let E=b&&m;return{...j,type:"switch",isChecked:E,onClick:()=>{c("enabled_bananagrams",!E)},tag:w,...p?null:C}},V=e=>{let{currentModel:t}=e,a=(0,h.A)(),{conversation:s}=(0,A.oM)(),i=(0,R.Ob)(),{toggleSearchTool:r,toggleConversationSetting:o}=(0,D.D$)(s),c=(0,S.Ys)(u.v8.GCAL),f=(0,l.Wq)()(t,"gsuite_tools"),g=(0,S.X0)(u.v8.GCAL,s),p=(0,S.vm)(),m=(0,S.dJ)(u.v8.GCAL),{isAuthenticated:b,startAuth:y,authBreakdown:x}=(0,S.ob)(u.v8.GCAL,{callerIdentifier:N,handleAuthSuccess:()=>{o("enabled_foccacia",!0)}}),v=F(),_=$("calendar_search");if(p&&m&&b||p&&!m||p&&!x.firstParty||!c&&!i)return null;let M=a.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),k=a.formatMessage({defaultMessage:"Google Calendar",id:"kjenxGoM59"}),C={key:"gcal",label:p?k:M,icon:(0,n.jsx)(d.HI,{size:16})};if(!c&&i)return{...C,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!b){let e=a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),t=a.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...C,type:"button",isExternal:!0,secondaryText:p?t:e,onClick:()=>{y()},...p?{tooltip:a.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...f?null:v}}let w=b&&g;return{...C,type:"switch",isChecked:w,onClick:()=>{r("enabled_foccacia",!w)},tag:_,...f?null:v}},J=e=>{let{actions:t,currentModel:a}=e,s=(0,h.A)(),{conversation:r}=(0,A.oM)(),o=(0,i.h0)(),c=(0,R.Ob)(),{toggleSearchTool:f,toggleConversationSetting:g}=(0,D.D$)(r),p=(0,S.Ys)(u.v8.GMAIL),m=(0,l.Wq)()(a,"gsuite_tools"),b=(0,S.X0)(u.v8.GMAIL,r),y=F(),x=$("gmail_search"),v=(0,S.vm)(),_=(0,S.dJ)(u.v8.GMAIL),{isAuthenticated:M,startAuth:k,authBreakdown:C}=(0,S.ob)(u.v8.GMAIL,{callerIdentifier:N,handleAuthSuccess:()=>{g("enabled_sourdough",!0)}});if(v&&_&&M||v&&!_||v&&!C.firstParty||!p&&!c)return null;let w=s.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),j=s.formatMessage({defaultMessage:"Gmail",id:"2hslSeuDXe"}),E={key:"gmail",label:v?j:w,icon:(0,n.jsx)(d.kw,{size:16})};if(!p&&c&&!o)return{...E,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!M){let e=s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),a=s.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...E,type:"button",isExternal:!0,secondaryText:v?a:e,onClick:()=>{v?k():t.openGmailAuthModal()},...v?{tooltip:s.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...m?null:y}}let I=M&&b;return{...E,type:"switch",isChecked:I,onClick:()=>{f("enabled_sourdough",!I)},tag:x,...m?null:y}},W=e=>{let{actions:t}=e,a=(0,h.A)(),{personalizedStyle:s}=(0,A.oM)(),{personalizedStyleOptions:l}=(0,E.p)();return[...l.map(e=>{let a=(null==s?void 0:s.key)===e.key;return{key:e.key,type:"option",label:"default"===e.type&&e.nameKey?(0,n.jsx)(r.X5,{id:e.nameKey}):e.name,icon:(0,n.jsx)(o.Styles,{size:16}),onClick:()=>{a?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:a}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,n.jsx)(o.Add,{size:16}),label:a.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},Z=e=>{let{actions:t}=e,a=(0,h.A)(),s=(0,R.Hd)(),{personalizedStyle:l}=(0,A.oM)(),i=W({actions:t}),r=a.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:f.xd.STYLES,type:"optionGroup",icon:(0,n.jsx)(o.Styles,{size:16}),label:r,secondaryText:(null==l?void 0:l.isDefault)||null==l?void 0:l.name,children:[...s?[]:[{type:"back",key:"styles-back",label:r}],...i],indicatorActive:l&&"Default"!==l.key}},K=e=>{let t,{currentModel:a,conversation:s}=e,l=(0,h.A)(),r=(0,w.vP)("paprika_mode"),d=(0,M.J)(),u=(0,M.j)()(a),g=(0,P.J)((0,w.rX)({source:"extendedThinkingMenuItem"}).toggleConversationSetting),m=(0,c.fS)("model_selector_enabled"),{data:x}=(0,y.EY)(),v=(0,i.h0)(),_=(0,p.useLayer)("trials_freemium"),k=F(),C=(0,R.Ob)(),S=!s||0===s.messagesSoFar,j=!v,A=_.get("free_thinking",!1),E=j&&A&&(null==x?void 0:x.remaining)===0,I=E&&r&&!S;(0,b.useEffect)(()=>{I&&g("paprika_mode",null)},[I]);let D=_.get("free_thinking",!1);if(!d||!m&&!D&&!C)return null;let T=l.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),G=!E&&!!r;if(j&&A&&x&&void 0!==x.remaining&&x.resets_at){let e=new Date(1e3*x.resets_at),a=l.formatDate(e,{month:"short",day:"numeric"});t=l.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:x.remaining,date:a})}let O={key:f.xd.EXTENDED_THINKING,type:"switch",label:T,icon:(0,n.jsx)(o.ExtendedThinking,{size:16}),isChecked:G,indicatorActive:G,...t&&{subtitle:t},...E&&{isDisabled:!0,tag:"upgrade",rateLimitReached:!0,onClick:()=>{window.location.href="/upgrade"}}};return d&&(m||D&&!v)||!C||v?u?{...O,...E?{}:{onClick:()=>{g("paprika_mode",r?null:"extended")},tooltip:l.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),tooltipImage:{src:"/images/feature-preview/extended-thinking.png",width:200,height:108}}}:{...O,...k}:{...O,isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},B=e=>{let t,{currentModel:a,conversation:l}=e,i=(0,h.A)(),{setModel:r}=(0,A.oM)(),d=(0,w.vP)("compass_mode"),c=(0,v.g7)(),u=(0,v.BU)(),g=null!=l?l:void 0,p=(0,v.Gm)(g),m=(0,s.Z3)((null==l?void 0:l.id)||null),b=(0,v.G8)()(a),y=(0,v.G8)()(m),{toggleResearchMode:x,canAutoEnableWebSearch:_}=(0,D.D$)(g),M=(0,R.lS)(),k=!l&&!b&&y,C=F();if(!c||M)return null;let S="advanced"===d,j=!1;if(u)if(p||_){if(!b&&!k)return{key:f.xd.COMPASS,type:"switch",label:i.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),icon:(0,n.jsx)(o.Research,{size:20}),indicatorActive:!1,...C}}else j=!0,t=i.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"});else j=!0,t=i.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});return{key:f.xd.COMPASS,type:"switch",label:i.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),icon:(0,n.jsx)(o.Research,{size:20}),isChecked:S,indicatorActive:S,isDisabled:j,...t&&{tooltip:t},onClick:()=>{k&&r(m),x(!S)}}},X=e=>{let{showConnectAction:t,mcpToolsSetting:a,toggleMcpToolEnabled:l,remoteOnly:i,activeServers:r}=e,d=(0,R.lS)(),c=(0,h.A)(),u=(0,C.QD)(),f=(0,O.yM)(),g=(0,G.VY)(),{conversation:p,model:m}=(0,A.oM)(),b=(0,s.Z3)((null==p?void 0:p.id)||null),y=null!=m?m:b,x=(0,T.Uz)({isConnecting:!1,...i?{type:"remote"}:{},...t?{}:{isConnected:!0}}),v=F();return(d&&r?x.filter(e=>r.has(e.uuid)):x).map(e=>{let t={key:e.uuid,label:e.name,icon:(0,n.jsx)(I.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name})};if(!e.isConnected)return{...t,type:"button",isExternal:!0,secondaryText:c.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>u({uuid:e.uuid,url:e.url})};let s=(0,G.Xf)({name:e.name,uuid:e.uuid},y,f,g),i=e.tools.map(t=>{let i=t.enabledKey,r=(0,G.GE)(i,a,s.isChromeExt);return{key:i,type:"switch",label:t.displayName,icon:(0,n.jsx)(I.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name}),isChecked:r,onClick:()=>{l(i,!r,e.url)},...s.disabledDueToModel?v:{}}}),m=i.filter(e=>"switch"===e.type&&e.isChecked).length,b=m>0,h=e.tools.length,x=[];i.length>1&&x.push({key:"select-all",type:"button",label:b?c.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):c.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),onClick:()=>{l(e.tools.map(e=>e.enabledKey),!b,e.url)},skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}),x.push(...i);let _=s.disabledDueToSettings?c.formatMessage({defaultMessage:"Enable this MCP in settings",id:"rJ8OY2j2Pd"}):c.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"});0===x.length&&x.push({key:"empty",type:"button",label:_,icon:(0,n.jsx)(o.Prohibit,{size:16}),onClick:()=>void 0,isDisabled:!0});let M={enabledCount:m,totalCount:h,isChecked:b,onClick:()=>{l(e.tools.map(e=>e.enabledKey),!b,e.url)}};return s.disabledDueToSettings?{...t,type:"switch",isChecked:!1,isDisabled:!0,tooltip:c.formatMessage({defaultMessage:"Enable this MCP in settings.",id:"DMRpQgJ6YJ"})}:d?{...t,...M,isChecked:!!r||M.isChecked,isDisabled:!!(null==p?void 0:p.id),type:"toggle"}:{...t,...M,type:"toggleGroup",children:x}})},q=e=>{var t;let{sessionMcpServers:a}=e,n=null!=(t=(0,w.vP)("enabled_mcp_tools"))?t:L,{toggleMcpToolEnabled:s}=(0,k.es)();return X({showConnectAction:!1,mcpToolsSetting:n,toggleMcpToolEnabled:s,activeServers:(0,b.useMemo)(()=>a?new Set(a.map(e=>e.name)):void 0,[a])})},Q=()=>{var e;let t=(0,T.Uz)({type:"remote"}),a=null!=(e=(0,w.vP)("enabled_mcp_tools"))?e:{},[n,s]=(0,b.useState)(()=>{let e=new Set(t.map(e=>e.uuid));return Object.fromEntries(Object.entries(a).filter(t=>{let[a]=t,n=a.split(":")[0];return e.has(n)}))});function l(e,t){s(a=>({...a,...Array.isArray(e)?Object.fromEntries(e.map(e=>[e,t])):{[e]:t}}))}let i=X({showConnectAction:!1,mcpToolsSetting:n,toggleMcpToolEnabled:l,remoteOnly:!0}),r=(0,b.useMemo)(()=>{let e=[];for(let a of t)for(let t of a.tools)e.push(t.enabledKey);return e},[t]),o=(0,b.useMemo)(()=>0!==r.length&&r.some(e=>!1!==n[e]),[r,n]);return{menuOptions:i,getEnabledRemoteTools:()=>{let e=[];for(let a of t)for(let t of a.tools)!1!==n[t.enabledKey]&&e.push({tool_name:t.name,server_uuid:a.uuid});return e},allToolKeys:r,anyConnectorEnabled:o,toggleAllConnectors:e=>{l(r,e)}}},$=e=>(0,p.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0}}]);