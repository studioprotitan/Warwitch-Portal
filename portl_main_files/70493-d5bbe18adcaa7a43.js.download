try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="b0c9069e-9e94-411c-83a1-bfbc6707f9ea",e._sentryDebugIdIdentifier="sentry-dbid-b0c9069e-9e94-411c-83a1-bfbc6707f9ea")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70493],{0xd96dfc62:(e,a,t)=>{t.d(a,{S:()=>m,v:()=>g});var s=t(0x22102fd88),l=t(0x225bae024),n=t(0x22fc8d729),o=t(0x1ab362a20),i=t(0x141440998),r=t(0x4d348f95),d=t(0x1dc42fcee),c=t(0x38e6572),u=t(0xd5e0c33c),f=t(0x21fb79560);function g(e){let{isOpen:a,onClose:t,limitType:g="projects",customTitle:m,customDescription:p}=e,x=(0,r.useRouter)(),h=(0,u.p)()||1,b=["opus"===g?{defaultMessage:"More Opus usage*",id:"JxRTAGj5OB"}:"message_limit"===g?{defaultMessage:"Access to tools like research and web search",id:"message_limit_benefit_tools"}:{defaultMessage:"Access to unlimited Projects to organize chats and documents",id:"uK9wA9v6Z3"},"opus"===g&&{defaultMessage:"Access to unlimited Projects to organize chats and documents",id:"uK9wA9v6Z3"},"projects"===g&&{defaultMessage:"More usage*",id:"Rve6Z5dM8k"},"message_limit"===g&&{defaultMessage:"Claude Code directly in your terminal",id:"message_limit_benefit_code"},"message_limit"===g&&{defaultMessage:"Integration to Google Workspace: email, calendar, and docs",id:"message_limit_benefit_workspace"},"message_limit"===g&&{defaultMessage:"Full access to the newest Claude models including Opus",id:"message_limit_benefit_models"},"message_limit"===g&&{defaultMessage:"Extended thinking for complex work",id:"message_limit_benefit_thinking"},"message_limit"!==g&&{defaultMessage:"Ability to search the web",id:"dl29r7OlXE"},"message_limit"!==g&&{defaultMessage:"Extended thinking for complex work",id:"mENE7vJhVQ"},"message_limit"!==g&&{defaultMessage:"Connect Google Workspace: email, calendar, and docs",id:"WwXweMd3IE"},"message_limit"!==g&&{defaultMessage:"Ability to use more Claude models",id:"Qpr1Da1f7N"}].filter(Boolean);return(0,s.jsx)(d.bL,{open:a,onOpenChange:t,children:(0,s.jsx)(d.ZL,{children:(0,s.jsx)(d.hJ,{className:"fixed inset-0 bg-always-black/50 backdrop-brightness-75 z-modal flex items-center justify-center data-[state=open]:animate-[fade_250ms_ease-in_forwards] data-[state=closed]:animate-[fade_125ms_ease-out_reverse_forwards]",children:(0,s.jsxs)(d.UC,{className:"z-modal w-full max-w-sm bg-bg-000 rounded-2xl shadow-xl overflow-hidden focus:outline-none data-[state=open]:animate-[zoom_250ms_ease-in_forwards] data-[state=closed]:animate-[zoom_125ms_ease-out_reverse_forwards]",onEscapeKeyDown:e=>{e.preventDefault(),t()},onInteractOutside:e=>{e.preventDefault(),t()},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 pt-4",children:[(0,s.jsx)(f.M,{}),(0,s.jsx)(d.bm,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon_sm",className:"text-text-400 hover:text-text-200",children:(0,s.jsx)(o.X,{size:20,weight:"regular"})})})]}),(0,s.jsxs)("div",{className:"px-5 pb-4 pt-2",children:[(0,s.jsx)("h2",{className:"text-[24px] leading-tight font-medium mb-2 text-text-000",children:m||("opus"===g?(0,s.jsx)(c.A,{defaultMessage:"More Opus with Pro and Max plans",id:"//ixi/rP/O"}):"message_limit"===g?(0,s.jsx)(c.A,{defaultMessage:"Keep chatting with Claude",id:"u3sKHTmxou"}):(0,s.jsx)(c.A,{defaultMessage:"Unlimited projects with Pro and Max plans",id:"RKBJDiWP1p"}))}),(0,s.jsx)("p",{className:"".concat("message_limit"===g?"text-sm":"text-base"," text-text-300 mb-3"),children:p||("opus"===g?(0,s.jsx)(c.A,{defaultMessage:"Free plans only get 3 Opus messages per week. Try again after {date}, or upgrade now to get:",id:"IIJcLbtXZK",values:{date:new Date(Date.now()+6048e5).toLocaleDateString("en-US",{month:"long",day:"numeric"})}}):"message_limit"===g?(0,s.jsx)(c.A,{defaultMessage:"You just hit your free message limit. Upgrade to Pro (or Max) to send more messages. You also get:",id:"vXAAoQRvRg"}):(0,s.jsx)(c.A,{defaultMessage:"Free plans only get access to {count, plural, one {one project} other {# projects}}. Upgrade now to get:",id:"C83WGxw1GN",values:{count:h}}))}),(0,s.jsx)("div",{className:"space-y-1.5 mb-6",children:b.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,s.jsx)(i.J,{className:"text-text-400 mt-0.5 flex-shrink-0",size:18,weight:"regular"}),(0,s.jsx)("span",{className:"text-sm text-text-200",children:(0,s.jsx)(c.A,{...e})})]},"benefit-".concat(a)))}),("opus"===g||"projects"===g)&&(0,s.jsx)("p",{className:"text-xs text-text-400 mb-4",children:(0,s.jsx)(n.Y,{href:"https://support.anthropic.com/en/articles/11049762-choosing-a-claude-ai-plan",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(c.A,{defaultMessage:"*Usage limits apply",id:"HFRZOFWXCf"})})}),(0,s.jsx)(l.$,{variant:"primary",size:"lg",className:"w-full text-base font-medium",onClick:()=>{t(),x.push("/upgrade")},children:(0,s.jsx)(c.A,{defaultMessage:"See plans",id:"vbFKkTYpN+"})})]})]})})})})}let m=g},0x1bd42f6d2:(e,a,t)=>{t.d(a,{CO:()=>f,M3:()=>d,bG:()=>c,ks:()=>m,pz:()=>r,z_:()=>u});var s=t(0x12c9046cd),l=t(0x14de19ae8),n=t(0x49fac030),o=t(0x17e725145),i=t(0x18175ce17);let r=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:t}=(0,l.YL)(),n=null==t?void 0:t.uuid,o=g(),r=(0,i.eL)();return(0,s.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs"),"POST",{enabled:!!(t&&e),...a,onSuccess:function(){for(var t,s=arguments.length,l=Array(s),n=0;n<s;n++)l[n]=arguments[n];o(e),null==(t=a.onSuccess)||t.call(a,...l)},onError:function(){for(var e,t=arguments.length,s=Array(t),l=0;l<t;l++)s[l]=arguments[l];null==(e=a.onError)||e.call(a,...s);let[n,o]=s;r(n,o)}})},d=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:t}=(0,l.YL)(),n=null==t?void 0:t.uuid,o=g();return(0,s.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs"),"PUT",{enabled:!!(t&&e),...a,onSuccess:function(){for(var t,s=arguments.length,l=Array(s),n=0;n<s;n++)l[n]=arguments[n];o(e),null==(t=a.onSuccess)||t.call(a,...l)}})},c=e=>{let{activeOrganization:a}=(0,l.YL)(),t=null==a?void 0:a.uuid,o=g();return(0,s.Qv)(a=>"/api/organizations/".concat(t,"/projects/").concat(e,"/syncs/").concat(a),"DELETE",(e,a)=>a?a.filter(a=>a.uuid!==e):a,{queryKey:[n.LV,{orgUuid:t,projectUuid:e}],enabled:!!a,onSuccess:()=>{o(e)}})},u=e=>{let{activeOrganization:a}=(0,l.YL)(),t=null==a?void 0:a.uuid,o=g();return(0,s.Qv)(()=>"/api/organizations/".concat(t,"/projects/").concat(e,"/syncs/delete_many"),"POST",(e,a)=>a?a.filter(a=>!e.sync_source_uuids.includes(a.uuid)):a,{queryKey:[n.LV,{orgUuid:t,projectUuid:e}],enabled:!!a,onSuccess:()=>{o(e)}})},f=function(e,a){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{activeOrganization:r}=(0,l.YL)(),d=null==r?void 0:r.uuid,c=(0,o.useQueryClient)(),u=!!(r&&e&&t),{data:f,isLoading:g}=(0,s.Sk)("/api/organizations/".concat(d,"/projects/").concat(e,"/syncs?calculate_size=").concat(null!=a&&a),{queryKey:[n.LV,{orgUuid:d,projectUuid:e,calculateSize:a}],enabled:u,refetchInterval:e=>{var a;return(null==(a=e.state.data)?void 0:a.some(i.z3))?5e3:3e5},structuralSharing:(a,t)=>{let s=void 0!==a&&a.some(i.z3),l=void 0!==t&&t.some(i.z3);return s&&!l&&c.invalidateQueries({queryKey:[n.qz,{orgUuid:d,projectUuid:e}]}),t}});return{data:f,isLoading:!!u&&g}},g=()=>{let{activeOrganization:e}=(0,l.YL)(),a=null==e?void 0:e.uuid,t=(0,o.useQueryClient)();return e=>{t.invalidateQueries({queryKey:[n.LV,{orgUuid:a,projectUuid:e}]}),t.invalidateQueries({queryKey:[n._G,{orgUuid:a,projectUuid:e}]}),t.invalidateQueries({queryKey:[n.qz,{orgUuid:a,projectUuid:e}]})}},m=e=>{let{data:a}=f(e);return!!(null==a?void 0:a.some(i.z3))}},0x21fb79560:(e,a,t)=>{t.d(a,{M:()=>o});var s=t(0x22102fd88),l=t(0x1a1f6dda6),n=t(0x38e6572);function o(e){let{className:a,onClick:t,as:o="span"}=e;return(0,s.jsx)(o,{className:(0,l.A)("border-0.5 border-border-400 text-accent-secondary-000 px-1.5 py-px rounded-3xl font-small",t&&"cursor-pointer hover:border-border-300 transition-colors",a),onClick:t,children:(0,s.jsx)(n.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}},0x235ccdd4d:(e,a,t)=>{t.d(a,{Si:()=>L,i1:()=>D,vV:()=>E,fU:()=>N});var s=t(0x22102fd88),l=t(0x597e433e),n=t(0x1139502dd),o=t(0x14aef0225),i=t(0x1a3383306),r=t(0xe670e093);function d(){var e,a;return!!(null==(a=window.claudeAppSettings)||null==(e=a.filePickers)?void 0:e.getPathForFile)}var c=t(0x226530adf),u=t(0x14a6d5f1),f=t(0xfd34bc37),g=t(0xf32c56dd),m=t(0x12c9046cd),p=t(0x14de19ae8),x=t(0x139b5e710),h=t(0xb3796c53),b=t(0x1016c6ed2),y=t(0x20e00cddd),v=t(0x49fac030),w=t(0xac309a83),_=t(0x214c6246e),j=t(0x21baeb1ec),M=t(0x17e725145),A=t(0x1a1f6dda6),C=t(0xfc89b4a4),k=t(0x38e6572),z=t(0x1ab0d1ca1),P=t(0x5267d157),F=t(0x15b1a866a),T=t(0x25d59887);let S=[{matcher:e=>e.message.toLowerCase().includes("failed to fetch")||e.message.toLowerCase().includes("load failed")||e.message.toLowerCase().includes("networkerror"),createMessage:()=>(0,s.jsx)(k.A,{defaultMessage:"Upload failed due to a network issue. Check your internet connection and try again.",id:"1bxKaj0pKU"})},{matcher:e=>e.message.includes("password protected")||e.message.includes("document_password_protected"),createMessage:()=>(0,s.jsx)(k.A,{defaultMessage:"The document you uploaded is password protected. Please remove the password and try again.",id:"DHwwKwuaCR"})},{matcher:e=>e.message.includes("https://docs.claude.com/en/docs/build-with-claude/files#error-handling"),createMessage:()=>(0,s.jsx)(k.A,{defaultMessage:'The title of the document you uploaded is too long, or includes forbidden characters (<, >, :, ", |, ?, *, \\, /, or unicode characters 0-31)',id:"NdLqN5Z3bE"})},{matcher:e=>e.message.includes("Code execution and file creation"),extractor:e=>[...new Set(e.map(e=>(0,l.QC)(e.file.name)))],createMessage:e=>(0,s.jsx)(k.A,{defaultMessage:"Files of the following {count, plural, one {format} other {formats}} require 'Code execution and file creation'. Go to Settings > Capabilities to enable: {formats}",id:"o/NOFEuWmE",values:{count:e.length,formats:(0,s.jsx)(F.dT,{type:"conjunction",value:e})}})},{matcher:e=>e.message.includes("not supported"),extractor:e=>[...new Set(e.map(e=>(0,l.QC)(e.file.name)))],createMessage:e=>(0,s.jsx)(k.A,{defaultMessage:"Files of the following {count, plural, one {format is} other {formats are}} not supported: {formats}",id:"9JcWWPAZoB",values:{count:e.length,formats:(0,s.jsx)(F.dT,{type:"conjunction",value:e})}})},{matcher:e=>e.message.includes("exceeds maximum size")||e.message.includes("File too large"),extractor:e=>e.map(e=>({file_type:e.file.type,file_size:e.file.size})),createMessage:()=>{let e=Math.floor(n.gZ/1048576);return(0,s.jsx)(k.A,{defaultMessage:"You may not upload files larger than {sizeLimit}mb.",id:"nW3gZD88Va",values:{sizeLimit:e}})},trackAnalytics:(e,a)=>{e.track({event_key:"file_upload_too_large",large_files:a})}}];function L(e){let{syncSourceCount:a,files:t,setFiles:o,numExistingConversationFiles:i,attachments:r,setAttachments:d,numExistingConversationAttachments:f,detectSameAttachment:g,selectedModel:m,blobFileUploadsEnabled:p,conversationUuid:b,wiggleEnabled:y,isLocalAgentMode:v=!1}=e,{addError:w}=(0,x.Yf)(),M=(0,c.Z3)(null);return function(e){let{syncSourceCount:a,onUploadComplete:t,existingAttachments:o,existingFiles:i,numExistingConversationAttachments:r,numExistingConversationFiles:d,selectedModel:c,blobFileUploadsEnabled:f,conversationUuid:g,wiggleEnabled:m,isLocalAgentMode:p=!1}=e,x=(0,z.A)(),{modelConfig:b}=(0,u.fC)(c),y=b.image_in,[v,w,M,A]=function(e){let{syncSourceCount:a,onUploadComplete:t,existingAttachments:l,existingFiles:o,numExistingConversationFiles:i,selectedModel:r,blobFileUploadsEnabled:d,conversationUuid:c,wiggleEnabled:f,isLocalAgentMode:g=!1}=e,{modelConfig:m}=(0,u.fC)(r),p=m.image_in,x=D()&&m.pdf_in,{isUploading:h,setIsUploading:b,handleError:y,handleUpload:v}=E({imagesEnabled:p,blobFileUploadsEnabled:d,onUploadComplete:t,rasterizePdfUploadsEnabled:x,conversationUuid:c,wiggleEnabled:f,isLocalAgentMode:g}),w=(0,C.useCallback)(e=>{let{newUploads:t=[],numNewPotentialAttachments:r=0,showError:c=!0}=e;if(r+t.length+(l.length+o.length+a)>n.XA.maxTotalUploadsPerMessage)return c&&y((0,s.jsx)(k.A,{defaultMessage:"You can add at most {count, plural, one {# attachment} other {# attachments}} to a message. Please select fewer attachments.",id:"qxV00r12ob",values:{count:n.XA.maxTotalUploadsPerMessage}})),!1;let u=i||0,{messageFileCount:f}=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=0,s=0,l=0;for(let o of e){let{willBecomeMessageFile:e,category:i}=function(e){var a;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(null==(a=e.name.split(".").pop())?void 0:a.toLowerCase())||"";return n.h8.includes(s)?{category:"image",willBecomeMessageFile:!!t.imagesEnabled}:n.Ap.includes(s)?{category:"pdf",willBecomeMessageFile:!!t.rasterizePdfUploadsEnabled,requiresFeatureGate:"janus_claude-ai"}:n.PC.includes(s)?{category:"out-of-context",willBecomeMessageFile:!!t.blobFileUploadsEnabled,requiresFeatureGate:"ooc_attachments"}:n.BA.includes(s)?{category:"text",willBecomeMessageFile:!1}:n.pH.includes(s)?{category:"document",willBecomeMessageFile:!1}:{category:"unsupported",willBecomeMessageFile:!1}}(o,a);"unsupported"===i?l++:e?t++:s++}return{messageFileCount:t,messageAttachmentCount:s,unsupportedCount:l}}(t,{blobFileUploadsEnabled:d,imagesEnabled:p,rasterizePdfUploadsEnabled:x});if(u+f>n.XA.maxFilesPerConversation){var g;return c&&y((g=n.XA.maxFilesPerConversation,(0,s.jsx)(k.A,{defaultMessage:"You can add at most {count, plural, one {# file} other {# files}} to a chat. {suggestion}",id:"QyrCxYs5Jy",values:{count:g,suggestion:u<g?(0,s.jsx)(k.A,{defaultMessage:"Please select fewer files.",id:"a6KVizNPLe"}):(0,s.jsx)(k.A,{defaultMessage:"Please consider starting a new chat.",id:"oN0R8lZNm6"})}}))),!1}return!0},[l,o,a,y,d,i,p,x]);return[h,b,w,(0,C.useCallback)(async e=>{w({newUploads:e})&&await v(e)},[v,w])]}({syncSourceCount:a,onUploadComplete:t,existingFiles:i,existingAttachments:o,numExistingConversationFiles:d,numExistingConversationAttachments:r,selectedModel:c,blobFileUploadsEnabled:f,conversationUuid:g,wiggleEnabled:m,isLocalAgentMode:p}),P=function(e){let{handleUpload:a}=e,t=(0,C.useRef)({ready:0,total:0}),s=(0,C.useCallback)(()=>{t.current={ready:0,total:0}},[]),l=(0,C.useCallback)(e=>{t.current.ready+=1,t.current.total===t.current.ready&&a(e)},[a]),n=(0,C.useCallback)((e,a)=>{let s=e.length;for(let o=0;o<s;o++){let s=e[o];s.isFile?(t.current.total+=1,s.file(e=>{a.push(e),l(a)})):s.isDirectory&&s.createReader().readEntries(e=>{n(e,a)})}},[l]);return(0,C.useCallback)(e=>{var a;e.preventDefault(),s();let t=null==(a=e.dataTransfer)?void 0:a.items;if(!t)return;let l=[];for(let e=0;e<(null==t?void 0:t.length);e++){let a=t[e].webkitGetAsEntry();a&&l.push(a)}n(l,[])},[n,s])}({handleUpload:A}),F=(0,C.useCallback)(async e=>{let a=Array.from(e).map(e=>new File([e],"".concat(Date.now(),"_").concat(e.name),{type:e.type,lastModified:e.lastModified}));await A(a)},[A]),T=(0,C.useCallback)(async e=>{let a=e.target.files;a&&await A(Array.from(a)),e.target.value=""},[A]),S=Math.floor(n.XA.maxFileSize/1048576),L=y?(0,s.jsx)(k.A,{defaultMessage:"Upload docs or images to Claude\\n(Max {maxUploads}, {maxSize}mb each)",id:"TGYeob9u0b",values:{maxUploads:n.XA.maxTotalUploadsPerMessage,maxSize:S}}):(0,s.jsx)(k.A,{defaultMessage:"Add content ({maxUploads} max, {maxSize}mb each)\\nAccepts pdf, txt, csv, etc.",id:"rW/kw78ou7",values:{maxUploads:n.XA.maxTotalUploadsPerMessage,maxSize:S}}),N=(0,C.useCallback)(e=>{T(e)},[T]),Y=(0,C.useMemo)(()=>({type:"file",accept:m?"":(0,l.cm)({imagesEnabled:y,outOfContextFilesEnabled:f}).join(","),onChange:N,multiple:!0,"aria-label":x.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"})}),[y,f,m,N,x]);return[v,w,M,P,F,A,(0,s.jsx)(h.Tooltip,{className:"text-center",tooltipContent:L,children:(0,s.jsxs)(U,{children:[(0,s.jsx)("input",{"data-testid":"file-upload",className:"absolute inset-0 -z-10 overflow-hidden rounded-xl opacity-0",...Y}),v?(0,s.jsx)(_.N,{className:"animate-spin",size:18}):(0,s.jsx)(j.x,{size:18,weight:"light"})]})},"upload-tooltip"),Y]}({syncSourceCount:a,onUploadComplete:(0,C.useCallback)(async(e,a)=>{if(g&&e.find(e=>g(e.extracted_content)))return void w((0,s.jsx)(k.A,{defaultMessage:"The same attachment was already added earlier. Claude sees the full conversation when replying, so there’s no need to re-upload.",id:"Uo3qvhGn7z"}));d(a=>[...a,...e]),o(e=>[...e,...a]),await Promise.resolve()},[g,w,d,o]),existingAttachments:r,existingFiles:t,numExistingConversationAttachments:f,numExistingConversationFiles:i,selectedModel:null!=m?m:M,blobFileUploadsEnabled:p,conversationUuid:b,wiggleEnabled:y,isLocalAgentMode:v})}let N=()=>{let e=(0,m.mn)(),a=(0,M.useQueryClient)();return async(t,s,l)=>{let n=new FormData;n.append("file",t);let o=l?"/api/organizations/".concat(s,"/projects/").concat(l,"/upload"):"/api/".concat(s,"/upload"),i=await e(o,{method:"POST",body:n}),r=await i.json();if(i.ok)return l&&a.invalidateQueries({queryKey:[v.qz,{orgUuid:s,projectUuid:l}]}),r;throw(0,b.a5)({status:i.status,response:r,fallbackMessage:"File upload failed",headers:i.headers,endpoint:o,method:"POST"})}},E=e=>{var a;let{imagesEnabled:t,blobFileUploadsEnabled:l,rasterizePdfUploadsEnabled:c,onUploadComplete:u,onError:m,projectUuid:h,conversationUuid:v,wiggleEnabled:w,isLocalAgentMode:_=!1}=e,{activeOrganization:j}=(0,p.YL)(),M=null!=(a=null==j?void 0:j.uuid)?a:"",[A]=(0,f.d)(),z=v||A,[F,L]=(0,C.useState)(!1),{addError:N}=(0,x.Yf)(),E=(()=>{let{addError:e}=(0,x.Yf)();return(0,C.useCallback)((a,t)=>{if(a instanceof b.LG){if("rate_limit_error"===a.type)return void e((0,s.jsxs)("p",{children:[(0,s.jsx)(k.A,{defaultMessage:"You’ve reached your limit for {resourceType} uploads. Please try again later.",id:"M88GeEDB7r",values:{resourceType:t}}),(0,s.jsx)(T.W,{})]}),{error:a});if("document_password_protected"===a.errorCode)return void e((0,s.jsx)("p",{children:(0,s.jsx)(k.A,{defaultMessage:"The document you uploaded is password protected. Please remove the password and try again.",id:"DHwwKwuaCR"})}),{error:a})}if(a instanceof b.LG&&"Image is too large"===a.message)return void e((0,s.jsx)("p",{children:(0,s.jsx)(k.A,{defaultMessage:"Image is too large. <link>Learn more</link>",id:"SFbt+MAvby",values:{link:e=>(0,s.jsx)("a",{href:"https://support.anthropic.com/en/articles/9002500-what-kinds-of-images-can-i-upload-to-claude-ai",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-accent-main-100",children:e})}})}),{error:a});e((0,s.jsx)("p",{children:(0,s.jsx)(k.A,{defaultMessage:"Your {resourceType} upload failed. Please try again.",id:"ymWsV10Pz1",values:{resourceType:t}})}),{error:a})},[e])})(),U=(0,C.useCallback)(e=>{L(!1),N(e,{errorContext:{tags:{source:"file_upload"}}}),m&&m()},[N,m,L]),D=(0,g.st)(),Y=(0,C.useCallback)(async(e,a)=>{L(!0);try{if(_){if(!d())return void U("File upload is only available in Claude for Desktop.");let{files:a,failedFiles:t}=function(e){let a=[],t=[];for(let s of e){let e=function(e){if(!d())return null;try{return window.claudeAppSettings.filePickers.getPathForFile(e)}catch(e){return null}}(s);if(!e){t.push(s);continue}let l={file_kind:i.Mr.Blob,file_uuid:(0,r.b)(),file_name:s.name,created_at:new Date().toISOString(),localPath:e,path:e};a.push(l)}return{files:a,failedFiles:t}}(e);if(t.length>0){let e=t.map(e=>e.name).join(", ");U("Could not get file paths for: ".concat(e));return}a.length>0&&await u([],a);return}if(!M)throw Error("Organization not loaded. Please try again.");let f=(0,o.e)(),g=(0,o.O)(e),m=function(e){let{orgUuid:a,projectUuid:t,conversationUuid:s,imagesEnabled:l,rasterizePdfUploadsEnabled:o,blobFileUploadsEnabled:i,wiggleEnabled:r}=e;return{orgUuid:a,projectUuid:t,conversationUuid:s,modelConfig:{image_in:l,pdf_in:o},featureGates:{janus_claude_ai:o,ooc_attachments:i,use_canvas_resize:!0,wiggleEnabled:r},limits:n.XA}}({orgUuid:M,projectUuid:h,conversationUuid:z,imagesEnabled:t,rasterizePdfUploadsEnabled:c,blobFileUploadsEnabled:l,wiggleEnabled:w}),p=await f.processFiles(g,m),{attachments:x,files:b,errors:v}=function(e){let a=[],t=[],s=[];for(let s of e.successful){let e=s.data;"attachment"===s.type?"extracted_content"in e&&a.push(e):"file_kind"in e&&t.push(e)}for(let a of e.failed)s.push({file:a.file,error:a.error});return{attachments:a,files:t,errors:s}}(p);if(function(e,a,t){if(0===e.length)return!1;for(let s of S){let l=e.filter(e=>s.matcher(e.error));if(l.length>0){let e=s.extractor?s.extractor(l):l;return s.trackAnalytics&&s.trackAnalytics(t,e),a(s.createMessage(e)),!0}}for(let t of e)if(t.error instanceof P.o)return a((0,P.B)(t.error)),!0;return e.forEach(e=>a(e.error.message)),!0}(v,U,D))return;let j=function(e,a,t){if(void 0===a||0===e.length)return e;let l=0,n=[];for(let o of e){if((l+=new Blob([o.extracted_content]).size/y.t2)>a)return t((0,s.jsx)(k.A,{defaultMessage:"Failed to upload file {filename}. Project knowledge exceeds maximum. Remove files to continue.",id:"MbvF6K3PJd",values:{filename:o.file_name}})),[];n.push(o)}return n}(x,a,U);if(0===j.length&&x.length>0)return;(j.length>0||b.length>0)&&await u(j,b)}catch(a){if(function(e,a){return e instanceof Error?(e.isRateLimit?a((0,s.jsx)(k.A,{defaultMessage:"Too many file upload attempts. Please wait and try again later.",id:"h/6cMHSn1V"})):413===e.statusCode||"file_too_large"===e.errorType?a((0,s.jsx)(k.A,{defaultMessage:"Uploaded file is too large. Try uploading a smaller part of the document, or copy/pasting an excerpt from the file.",id:"/mCoauj3Ws"})):"extraction_failed"===e.errorType?a((0,s.jsx)(k.A,{defaultMessage:"The file format may not be supported or the file may be corrupted.",id:"CvPTXPZIw8"})):a((0,s.jsx)(k.A,{defaultMessage:"One or more file uploads have failed. Please try again.",id:"FIwcYDeyIC"})),!0):(a((0,s.jsx)(k.A,{defaultMessage:"One or more file uploads have failed. Please try again.",id:"FIwcYDeyIC"})),!0)}(a,U))return;let e="file";a instanceof Error&&a.message.includes("image")&&(e="image"),E(a,e)}finally{L(!1)}},[l,u,t,z,U,E,M,D,c,h,w,_]);return{isUploading:F,setIsUploading:L,handleError:U,handleUpload:Y}};function U(e){let{className:a,...t}=e;return(0,s.jsx)("label",{className:(0,A.A)("relative grid place-content-center aspect-square rounded-xl cursor-pointer transition [fieldset:not(:disabled)_&]:hover:bg-bg-400 [fieldset:disabled_&]:opacity-50 [fieldset:disabled_&]:pointer-events-none focus-within:ring inline-flex items-center justify-center shrink-0 ring-offset-2 ring-offset-bg-300 ring-accent-main-100 focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none disabled:drop-shadow-none bg-[radial-gradient(ellipse,_var(--tw-gradient-stops))] from-bg-500/10 from-50% to-bg-500/30 border-0.5 border-border-400 font-medium font-ui text-text-100/90 transition-colors active:bg-bg-500/50 hover:text-text-000 hover:bg-bg-500/60",a),...t})}let D=()=>(0,w.fS)("janus_claude-ai")}}]);