try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0b0413de-c2ad-4b61-9868-c3e7c3c82816",e._sentryDebugIdIdentifier="sentry-dbid-0b0413de-c2ad-4b61-9868-c3e7c3c82816")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75657],{0x50bd9c8e:(e,t,a)=>{a.d(t,{S:()=>m});var s=a(0x22102fd88),l=a(0x14de19ae8),i=a(0x183548b63),d=a(0x23ed6222b),n=a(0xfc89b4a4),r=a(0x1ab0d1ca1),u=a(0x38e6572),o=a(0x23e1b1f63),c=a(0x4339cba),x=a(0xfab48d52);function m(e){let{onNext:t,currentLimit:a,isPending:m=!1,isSetupFlow:g=!1,monthlyLimit:f,seatType:p,limitType:b}=e,h=(0,r.A)(),v=(0,l.zm)(),y=(0,l.mV)(),{data:j}=(0,x.WF)(),{data:M,mutate:_}=(0,o.Pz)({});(0,n.useEffect)(()=>{v&&_({billingInterval:c.NW.YEARLY})},[v,_]);let A=(null==j?void 0:j.currency)||(null==M?void 0:M.currency)||"USD",[S,k]=(0,n.useState)("number"==typeof a?a/100:"standard"===p?null===f?50:f?Math.round(f/100*.1):50:"premium"===p?null===f?500:f?Math.round(f/100*.5):500:2e3),[N,w]=(0,n.useState)(null);return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("p",{className:"text-text-100 text-sm",children:(0,s.jsx)(u.A,{defaultMessage:"You can set a maximum amount {target} can spend on extra usage per month.",id:"52LXG0+owQ",values:{target:(()=>{switch(y?b:void 0){case"organization":return h.formatMessage({defaultMessage:"your org",id:"jKcFzGm1P7"});case"seat_tier":return"premium"===p?h.formatMessage({defaultMessage:"Premium seats",id:"F+VBddrs4U"}):h.formatMessage({defaultMessage:"Standard seats",id:"3/KOt/W/Wx"});case"member":return h.formatMessage({defaultMessage:"this member",id:"wmS6PFSLBf"});default:return h.formatMessage({defaultMessage:"you",id:"Jjrc4PBO4e"})}})()}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-bg-000 border border-border-300 rounded-lg text-text-100 focus:outline-none focus:ring-2 focus:ring-bg-500 focus:border-text-000",value:(0,d.vv)(100*S,A,{preferWholeNumber:!0}),onChange:e=>{k((e=>{let t=parseFloat(e.replace(/[^0-9.]/g,""));return isNaN(t)?0:t})(e.target.value))}}),(0,s.jsx)("p",{className:"text-xs mt-3 ".concat(0===S?"text-danger-000":"text-text-300"),children:0===S?(0,s.jsx)(u.A,{defaultMessage:"Setting a limit to $0 effectively disables additional spend",id:"B19r4H7Udc"}):(0,s.jsx)(u.A,{defaultMessage:"This spending limit goes into effect immediately",id:"BwguzViyew"})})]}),(0,s.jsxs)(i.vW,{children:[(0,s.jsx)(i.yl,{variant:"secondary",onClick:()=>{w("unlimited"),t("unlimited")},loading:m&&"unlimited"===N,disabled:m,children:g?(0,s.jsx)(u.A,{defaultMessage:"Skip",id:"/4tOwTiCH6"}):(0,s.jsx)(u.A,{defaultMessage:"Set to unlimited",id:"nDe1hLMIrc"})}),(0,s.jsx)(i.yl,{variant:"primary",onClick:()=>{w("limit"),t(S)},loading:m&&"limit"===N,disabled:S<0||m,children:(0,s.jsx)(u.A,{defaultMessage:"Set spending limit",id:"2mj4+NkFC7"})})]})]})}},0xb18e8798:(e,t,a)=>{a.d(t,{_:()=>m});var s=a(0x22102fd88),l=a(0x14de19ae8),i=a(0x183548b63),d=a(0x23ed6222b),n=a(0xfc89b4a4),r=a(0x1ab0d1ca1),u=a(0x38e6572),o=a(0x23e1b1f63),c=a(0x4339cba),x=a(0xfab48d52);function m(e){let{onNext:t,currentStandardLimit:a,currentPremiumLimit:m,currentUsageBasedLimit:g,currentUsageBasedChatLimit:f,isPending:p=!1,isSetupFlow:b=!1,showBothTiers:h=!1,tierToEdit:v,monthlyLimit:y}=e,j=(0,r.A)(),M=(0,l.zm)(),{data:_}=(0,x.WF)(),{data:A,mutate:S}=(0,o.Pz)({});(0,n.useEffect)(()=>{M&&S({billingInterval:c.NW.YEARLY})},[M,S]);let k=(null==_?void 0:_.currency)||(null==A?void 0:A.currency)||"USD",N=null===y?50:y?Math.round(y/100*.1):50,w=null===y?500:y?Math.round(y/100*.5):500,C=null===y?1e3:y?Math.round(y/100*.75):1e3,E=null===y?500:y?Math.round(y/100*.5):500,[F,z]=(0,n.useState)(null!=a?Math.round(a/100):N),[L,T]=(0,n.useState)(null!=m?Math.round(m/100):w),[D,P]=(0,n.useState)(null!=g?Math.round(g/100):C),[Y,B]=(0,n.useState)(null!=f?Math.round(f/100):E),[Q,K]=(0,n.useState)(null),W=e=>(0,d.vv)(100*e,k,{preferWholeNumber:!0}),Z=e=>{let t=parseFloat(e.replace(/[^0-9.]/g,""));return isNaN(t)?0:t};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("p",{className:"text-text-300",children:(0,s.jsx)(u.A,{defaultMessage:"Choose limits by seat type. Individual limits can be adjusted anytime.",id:"PRz1UgB4A2"})}),(h||"standard"===v)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-text-100 mb-2",children:(0,s.jsx)(u.A,{defaultMessage:"Standard users",id:"pUZKZK1oR6"})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-bg-000 border border-border-300 rounded-lg text-text-100 focus:outline-none focus:ring-2 focus:ring-bg-500 focus:border-text-000",value:W(F),onChange:e=>{z(Z(e.target.value))},placeholder:b&&y?j.formatMessage({defaultMessage:"10% of spend cap",id:"mej4YEQC4c"}):void 0}),b&&y&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-400 text-sm pointer-events-none",children:(0,s.jsx)(u.A,{defaultMessage:"10% of spend cap",id:"mej4YEQC4c"})})]}),(0,s.jsx)("p",{className:"text-sm mt-2 ".concat(0===F?"text-danger-000":"text-text-300"),children:0===F?(0,s.jsx)(u.A,{defaultMessage:"Setting a limit to $0 effectively disables additional spend",id:"B19r4H7Udc"}):(0,s.jsx)(u.A,{defaultMessage:"This spend cap goes into effect immediately",id:"QE5ZXwD1KZ"})})]}),(h||"premium"===v)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-text-100 mb-2",children:(0,s.jsx)(u.A,{defaultMessage:"Premium users",id:"eB1up2jpXi"})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-bg-000 border border-border-300 rounded-lg text-text-100 focus:outline-none focus:ring-2 focus:ring-bg-500 focus:border-text-000",value:W(L),onChange:e=>{T(Z(e.target.value))},placeholder:b&&y?j.formatMessage({defaultMessage:"50% of spend cap",id:"7qiFyMr6ak"}):void 0}),b&&y&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-400 text-sm pointer-events-none",children:(0,s.jsx)(u.A,{defaultMessage:"50% of spend cap",id:"7qiFyMr6ak"})})]}),(0,s.jsx)("p",{className:"text-sm mt-2 ".concat(0===L?"text-danger-000":"text-text-300"),children:0===L?(0,s.jsx)(u.A,{defaultMessage:"Setting a limit to $0 effectively disables additional spend",id:"B19r4H7Udc"}):(0,s.jsx)(u.A,{defaultMessage:"This spend cap goes into effect immediately",id:"QE5ZXwD1KZ"})})]}),"usage_based"===v&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-text-100 mb-2",children:(0,s.jsx)(u.A,{defaultMessage:"Chat + Code users",id:"MZxdURYHMj"})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-bg-000 border border-border-300 rounded-lg text-text-100 focus:outline-none focus:ring-2 focus:ring-bg-500 focus:border-text-000",value:W(D),onChange:e=>{P(Z(e.target.value))},placeholder:b&&y?j.formatMessage({defaultMessage:"75% of spend cap",id:"57DlYlA1Jw"}):void 0}),b&&y&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-400 text-sm pointer-events-none",children:(0,s.jsx)(u.A,{defaultMessage:"75% of spend cap",id:"57DlYlA1Jw"})})]}),(0,s.jsx)("p",{className:"text-sm mt-2 ".concat(0===D?"text-danger-000":"text-text-300"),children:0===D?(0,s.jsx)(u.A,{defaultMessage:"Setting a limit to $0 effectively disables additional spend",id:"B19r4H7Udc"}):(0,s.jsx)(u.A,{defaultMessage:"This spend cap goes into effect immediately",id:"QE5ZXwD1KZ"})})]}),"usage_based_chat"===v&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-text-100 mb-2",children:(0,s.jsx)(u.A,{defaultMessage:"Chat users",id:"VlhvBY/dzS"})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-bg-000 border border-border-300 rounded-lg text-text-100 focus:outline-none focus:ring-2 focus:ring-bg-500 focus:border-text-000",value:W(Y),onChange:e=>{B(Z(e.target.value))},placeholder:b&&y?j.formatMessage({defaultMessage:"50% of spend cap",id:"7qiFyMr6ak"}):void 0}),b&&y&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-400 text-sm pointer-events-none",children:(0,s.jsx)(u.A,{defaultMessage:"50% of spend cap",id:"7qiFyMr6ak"})})]}),(0,s.jsx)("p",{className:"text-sm mt-2 ".concat(0===Y?"text-danger-000":"text-text-300"),children:0===Y?(0,s.jsx)(u.A,{defaultMessage:"Setting a limit to $0 effectively disables additional spend",id:"B19r4H7Udc"}):(0,s.jsx)(u.A,{defaultMessage:"This spend cap goes into effect immediately",id:"QE5ZXwD1KZ"})})]}),(0,s.jsxs)(i.vW,{children:[(0,s.jsx)(i.yl,{variant:"secondary",onClick:()=>{K("unlimited"),h?t(null,null,null,null):"standard"===v?t(null,void 0,void 0,void 0):"premium"===v?t(void 0,null,void 0,void 0):"usage_based"===v?t(void 0,void 0,null,void 0):"usage_based_chat"===v&&t(void 0,void 0,void 0,null)},loading:p&&"unlimited"===Q,disabled:p,children:b?(0,s.jsx)(u.A,{defaultMessage:"Skip",id:"/4tOwTiCH6"}):(0,s.jsx)(u.A,{defaultMessage:"Set to unlimited",id:"nDe1hLMIrc"})}),(0,s.jsx)(i.yl,{variant:"primary",onClick:()=>{K("limits"),h?t(F,L,D,Y):"standard"===v?t(F,void 0,void 0,void 0):"premium"===v?t(void 0,L,void 0,void 0):"usage_based"===v?t(void 0,void 0,D,void 0):"usage_based_chat"===v&&t(void 0,void 0,void 0,Y)},loading:p&&"limits"===Q,disabled:p||h&&(F<0||L<0||D<0)||!h&&"standard"===v&&F<0||!h&&"premium"===v&&L<0||!h&&"usage_based"===v&&D<0||!h&&"usage_based_chat"===v&&Y<0,children:b?(0,s.jsx)(u.A,{defaultMessage:"Specify limits",id:"Nqgb+siZnz"}):(0,s.jsx)(u.A,{defaultMessage:"Set cap",id:"W6Q1V5p8VD"})})]})]})}},0x14206585f:(e,t,a)=>{a.d(t,{V:()=>m});var s=a(0x22102fd88),l=a(0x183548b63),i=a(0xfc89b4a4),d=a(0x38e6572),n=a(0xfab48d52),r=a(0x14de19ae8),u=a(0x14d9296b0),o=a(0x1eab0f273),c=a(0x50bd9c8e),x=a(0xb18e8798);function m(e){let{isOpen:t,onClose:a,onEnabling:m,hasCredits:g=!1}=e,f=(0,r.mV)(),p=(0,r.zm)(),{data:b,refetch:h}=(0,n.Wm)(),{mutate:v,isPending:y}=(0,n.pA)({onSuccess:()=>{h(),N||a(!0)}}),j=(null==b?void 0:b.monthlyLimit)!==void 0&&(null==b?void 0:b.monthlyLimit)!==null&&(null==b?void 0:b.monthlyLimit)>0,M=(0,i.useCallback)(()=>(g||p)&&(j||p||g)?"set_limits":"add_credits",[j,p,g]),[_,A]=(0,i.useState)(M()),[S,k]=(0,i.useState)(null),[N,w]=(0,i.useState)(null),[C,E]=(0,i.useState)(null),{mutate:F}=(0,n.D5)(),{mutate:z}=(0,n.D5)(),{mutate:L}=(0,n.$Q)();(0,i.useEffect)(()=>{t?j||(A(M()),k(null),w(null)):(A(M()),k(null),w(null),E(null))},[t,j,p,M]),(0,i.useEffect)(()=>{t&&j&&(g||p)&&(null==m||m(),v({monthlyLimit:b.monthlyLimit,isEnabled:!0}))},[t,j,g,p,null==b?void 0:b.monthlyLimit,v,m]);let T=t&&(!j||!g&&!p),[D,P]=(0,i.useState)(0),[Y,B]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if((null==b?void 0:b.isEnabled)&&N){let e=0;null!==N.standard&&e++,null!==N.premium&&e++,B(e),P(0),null!==N.standard&&F({tier:"standard",limit:N.standard},{onSettled:()=>{P(e=>e+1)}}),null!==N.premium&&z({tier:"premium",limit:N.premium},{onSettled:()=>{P(e=>e+1)}}),w(null)}(null==b?void 0:b.isEnabled)&&C&&(L({enabled:!0,amount:C.amount,threshold:C.threshold}),E(null))},[null==b?void 0:b.isEnabled,N,C,F,z,L]),(0,i.useEffect)(()=>{Y>0&&D===Y&&(null==b?void 0:b.isEnabled)&&a(!0)},[D,Y,null==b?void 0:b.isEnabled,a]),(0,s.jsx)(l.aF,{isOpen:T,onClose:()=>a(!1),modalSize:"lg",hasCloseButton:!0,title:(()=>{switch(_){case"add_credits":return(0,s.jsx)(d.A,{defaultMessage:"Buy extra usage",id:"zlZmUPVSac"});case"auto_reload":return(0,s.jsx)(d.A,{defaultMessage:"Turn on auto-reload",id:"KPzQz15Q9f"});case"set_limits":return(0,s.jsx)(d.A,{defaultMessage:"Set monthly spending limit",id:"hziyT/bef2"});case"set_seat_limits":return(0,s.jsx)(d.A,{defaultMessage:"Specify limits by seat type",id:"u8PuzaLLjp"})}})(),children:(0,s.jsxs)("div",{className:"mt-6",children:["add_credits"===_&&(0,s.jsx)(u.G,{onComplete:()=>{A("auto_reload")}}),"auto_reload"===_&&(0,s.jsx)(o.v,{onComplete:e=>{e&&E(e),A("set_limits")},onSkip:()=>{A("set_limits")},isSetupFlow:!0}),"set_limits"===_&&(0,s.jsx)(c.S,{onNext:e=>{let t="unlimited"===e?null:100*e;k(t),f&&null!==t&&t>0?A("set_seat_limits"):v({monthlyLimit:t,isEnabled:!0})},isPending:y,isSetupFlow:!0,limitType:"organization"}),"set_seat_limits"===_&&(0,s.jsx)(x._,{onNext:(e,t)=>{w({standard:null!=e?100*e:null,premium:null!=t?100*t:null}),v({monthlyLimit:S,isEnabled:!0})},isPending:y,isSetupFlow:!0,showBothTiers:!0,monthlyLimit:S})]})})}},0x1a7194edb:(e,t,a)=>{a.d(t,{n:()=>f,z:()=>p});var s=a(0x22102fd88),l=a(0xfab48d52),i=a(0xf32c56dd),d=a(0x14de19ae8),n=a(0x139b5e710),r=a(0x183548b63),u=a(0x22fc8d729),o=a(0x49fac030),c=a(0x17e725145),x=a(0xfc89b4a4),m=a(0x38e6572),g=a(0x1ab0d1ca1);function f(e){let{isOpen:t,onClose:a,onConfirm:l,isEnabling:i}=e,n=(0,d.mV)();return(0,s.jsx)(r.aF,{isOpen:t,onClose:a,modalSize:"md",hasCloseButton:!0,title:(0,s.jsx)(m.A,{defaultMessage:"Turn on extra usage",id:"c3akKO6gKx"}),children:(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("p",{className:"text-text-300 mb-8",children:n?(0,s.jsx)(m.A,{defaultMessage:"By clicking ‘Turn on’, you agree to turn on extra usage for your organization as defined in our <link>Help Center article</link>.",id:"3gm2NprwTl",values:{link:e=>(0,s.jsx)(u.Y,{href:"https://support.claude.com/en/articles/12005970-extra-usage-for-team-and-enterprise-plans",target:"_blank",rel:"noopener noreferrer",children:e})}}):(0,s.jsx)(m.A,{defaultMessage:"By clicking ‘Turn on’, you agree to turn on extra usage as defined in our <link>Help Center article</link>.",id:"w3PvxXJhN9",values:{link:e=>(0,s.jsx)(u.Y,{href:"https://support.claude.com/en/articles/12429409-extra-usage-for-paid-claude-plans",target:"_blank",rel:"noopener noreferrer",children:e})}})}),(0,s.jsxs)(r.vW,{children:[(0,s.jsx)(r.yl,{variant:"secondary",onClick:a,disabled:i,children:(0,s.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(r.yl,{variant:"primary",onClick:l,loading:i,children:(0,s.jsx)(m.A,{defaultMessage:"Turn on",id:"npvxprjeDK"})})]})]})})}function p(e){let{onOverageBillingSetupComplete:t,onEnabled:a}=e,s=(0,g.A)(),r=(0,i.st)(),u=(0,c.useQueryClient)(),{addSuccess:m,addError:f}=(0,n.Yf)(),p=(0,d.zm)(),{activeOrganization:b}=(0,d.YL)(),h=null==b?void 0:b.uuid,{data:v}=(0,l.WF)(),y="number"==typeof(null==v?void 0:v.amount)&&v.amount>0,{mutate:j,isPending:M}=(0,l.pA)({onSuccess:()=>{m(s.formatMessage({defaultMessage:"Extra usage has been turned on",id:"LC2Ix1nDGO"})),r.track({event_key:"claudeai.overages.enabled",spend_limit_type:"organization"}),a(y),u.setQueryData([o.Z9,{orgUuid:h}],[])},onError:e=>{f(e.message||s.formatMessage({defaultMessage:"Failed to turn on extra usage",id:"YHVjXnuk3m"}),{error:e,messageForLogging:"Failed to turn on extra usage"})}}),{mutate:_,isPending:A}=(0,l.HP)({onSuccess:e=>{null==t||t(y,p,e),j({isEnabled:!0})},onError:e=>{f(e.message||s.formatMessage({defaultMessage:"Failed to set up billing infrastructure",id:"wmQ2LJxiyG"}),{error:e,messageForLogging:"Failed to set up billing infrastructure"})}}),S=(0,x.useCallback)(()=>{_({seat_tier_monthly_spend_limits:p?{enterprise_standard:null,enterprise_tier_1:null,enterprise_usage_based:null,enterprise_usage_based_chat:null}:{team_standard:null,team_tier_1:null},org_monthly_spend_limit:l.Dy})},[p,_]);return(0,x.useMemo)(()=>({isEnabling:M||A,onEnableOveragesConfirm:S}),[M,A,S])}},0x21dcf50a5:(e,t,a)=>{a.d(t,{d:()=>c});var s=a(0x22102fd88),l=a(0x23e1b1f63),i=a(0x143216d6),d=a(0x14de19ae8),n=a(0x155df12ed),r=a(0x17e725145),u=a(0xfc89b4a4),o=a(0x38e6572);function c(e){let{isOpen:t,onClose:a,onComplete:c}=e,x=(0,r.useQueryClient)(),{activeOrganization:m}=(0,d.YL)(),g=(0,u.useMemo)(()=>(null==m?void 0:m.billing_type)==="apple_subscription"?(0,s.jsx)(o.A,{defaultMessage:"Your subscription is billed through Apple. To keep using Claude when you hit a limit, add a payment method.",id:"bLtw7Ag5MH"}):(null==m?void 0:m.billing_type)==="google_play_subscription"?(0,s.jsx)(o.A,{defaultMessage:"Your subscription is billed through Google. To keep using Claude when you hit a limit, add a payment method.",id:"dKhnIF3iKx"}):(0,s.jsx)(o.A,{defaultMessage:"Your subscription is billed through a mobile provider. To keep using Claude when you hit a limit, add a payment method.",id:"rrzOGn51kv"}),[null==m?void 0:m.billing_type]),f=(0,u.useCallback)(e=>{e&&x.setQueryData([l.A5,null==m?void 0:m.uuid],e),c()},[x,null==m?void 0:m.uuid,c]);return(0,s.jsxs)(n.aF,{isOpen:t,onClose:a,modalSize:"lg",title:(0,s.jsx)(o.A,{defaultMessage:"Add a payment method",id:"AiQP5MqFFV"}),hasCloseButton:!0,children:[(0,s.jsx)("p",{className:"mb-4 text-text-100",children:g}),(0,s.jsx)(i.n,{action:"setup-mobile-subscriber-stripe-payments",product:"overages",returnPath:"/settings/usage",onPaymentMethodUpdated:f,onCancel:a})]})}}}]);